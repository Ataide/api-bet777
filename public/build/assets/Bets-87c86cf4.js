import{q as y,r as x,j as e,y as h,b as _}from"./app-1da9aa01.js";import{A}from"./AuthenticatedLayout-de557718.js";import{T as v,a as C,b,C as g,d as T,D as S}from"./Search-f9666e62.js";import{B as t}from"./Box-4c5a3bfe.js";import{T as P}from"./TextField-c34b30e1.js";import{I as M}from"./InputAdornment-d3943b95.js";import{f as k,g as I}from"./helper-545a7ee1.js";import{P as f}from"./Menu-1d54303a.js";import{G as u}from"./Grid-098d3274.js";import{h as j}from"./moment-fbc5633a.js";import{T as r}from"./Typography-8b85f71b.js";import{B as R}from"./Button-7e7c33c2.js";import{D as F,C as N,A as Y,p as z,a as B}from"./index-fdea5fbf.js";import"./createSvgIcon-083c0f2e.js";import"./IconButton-c83bf1f0.js";import"./Close-52ffba25.js";function E({resource:a}){const{bets:o}=y().props,[d,i]=x.useState(""),[c,s]=x.useState(),l=(m,p)=>{i(p),a&&h.get(a,{search:c,status:p},{preserveState:!0})},n=m=>{s(m.target.value),h.get("",{search:m.target.value},{preserveState:!0})};return e.jsxs(t,{display:"flex",alignItems:"center",children:[e.jsx(v,{value:d,children:e.jsx(t,{sx:{borderBottom:1,borderColor:"divider"},children:e.jsx(C,{onChange:l,"aria-label":"lab API tabs example",children:e.jsx(b,{label:e.jsxs("div",{children:["Todos",e.jsx(g,{sx:{background:"white",color:"black",ml:1,borderRadius:"5px"},size:"small",label:(o==null?void 0:o.total)||0})]}),value:""})})})}),e.jsx(t,{mr:4,flex:1,display:"flex",flexDirection:"row",justifyContent:"end",alignItems:"center",children:e.jsx(P,{InputProps:{startAdornment:e.jsx(M,{position:"start",children:e.jsx(T,{sx:{color:"#fff"}})})},InputLabelProps:{shrink:!1},color:"secondary",required:!0,id:"search",placeholder:"Buscar",name:"search",value:c,onChange:n})})]})}function G({bets:a,resource:o}){const d=[{field:"user_id",headerName:"ID",sortable:!1,flex:1},{field:"name",headerName:"Nome",sortable:!1,flex:1},{field:"total_bets",headerName:"Apostas",type:"number",headerAlign:"left",align:"left",flex:1,valueGetter:s=>s.row.total_bets},{field:"amount",headerName:"Saldo",type:"number",headerAlign:"left",align:"left",flex:1,valueGetter:s=>k.format(s.row.amount)}],[i,c]=x.useState([]);return e.jsxs(e.Fragment,{children:[e.jsxs(f,{elevation:5,variant:"indicator",children:[e.jsx(E,{}),e.jsx(S,{getRowId:s=>s.user_id,disableRowSelectionOnClick:!0,disableColumnSelector:!0,rows:a.data,rowCount:a.total,paginationMode:"server",columns:d,density:"comfortable",initialState:{pagination:{paginationModel:{page:a.current_page-1,pageSize:a.per_page}}},onPaginationModelChange:(s,l)=>{h.get("/apostas",{page:s.page+1,per_page:s.pageSize},{only:["bets"],preserveState:!0})},checkboxSelection:!0,rowSelectionModel:i,onRowSelectionModelChange:s=>{if(s.length>1){const l=new Set(i),n=s.filter(m=>!l.has(m));h.visit(route("bets",{id:n[0]}),{method:"get",only:["userPapers","data_donut"],preserveState:!0}),c(n)}else h.visit(route("bets",{id:s[0]}),{method:"get",only:["userPapers","data_donut"],preserveState:!0}),c(s)}})]}),e.jsx(u,{item:!0,xs:12,children:e.jsx(f,{sx:({palette:s})=>({backgroundColor:s.background.default})})})]})}var w=(a=>(a[a.Vitoria=1]="Vitoria",a[a.Aberto=0]="Aberto",a[a.Derrota=-1]="Derrota",a))(w||{});function O({paper:a}){const[o,d]=x.useState(!1);return e.jsx(f,{sx:{width:"100%"},children:e.jsxs(t,{p:2,children:[e.jsxs(t,{display:"flex",justifyContent:"space-between",mb:.5,children:[e.jsxs(t,{display:"flex",children:[e.jsx(r,{variant:"body2",color:"initial",children:"Aposta:"}),e.jsx(r,{variant:"body2",color:"primary",ml:1,children:a.quantity>1?"Múltipla":"Única"}),e.jsx(r,{variant:"body2",color:"initial",ml:2,children:"Odd:"}),e.jsx(r,{variant:"body2",color:"primary",ml:1,children:a.rate})]}),e.jsx(t,{display:"flex",children:e.jsx(R,{variant:"text",color:"primary",onClick:()=>d(!o),children:"detalhes"})})]}),e.jsxs(t,{display:"flex",justifyContent:"space-between",mb:.5,children:[e.jsxs(t,{display:"flex",children:[e.jsx(r,{variant:"body2",color:"initial",children:"Palpite:"}),e.jsx(r,{variant:"body2",color:"primary",ml:1,children:I(a.bets)})]}),e.jsxs(t,{display:"flex",children:[e.jsx(r,{variant:"body2",color:"initial",children:"Valor:"}),e.jsxs(r,{variant:"body2",color:"primary",ml:1,children:["R$ ",a.amount]}),e.jsx(r,{variant:"body2",color:"initial",ml:1,children:"Lucro possível:"}),e.jsxs(r,{variant:"body2",color:"primary",ml:1,children:["R$ ",a.profit]})]})]}),e.jsxs(t,{display:"flex",justifyContent:"space-between",mb:.5,children:[e.jsxs(t,{display:"flex",children:[e.jsx(r,{variant:"body2",color:"initial",children:"Jogos:"}),e.jsx(r,{variant:"body2",color:"primary",ml:1,children:a.bets.length})]}),e.jsxs(t,{display:"flex",children:[e.jsx(r,{variant:"body2",color:"initial",children:"Data da aposta:"}),e.jsx(r,{variant:"body2",color:"primary",ml:1,children:j(a.created_at).format("DD/MM/YYYY")}),e.jsx(r,{variant:"body2",color:"initial",ml:1,children:"Hora:"}),e.jsx(r,{variant:"body2",color:"primary",ml:1,children:j(a.created_at).format("hh:mm")})]})]}),e.jsxs(t,{display:"flex",justifyContent:"end",children:[e.jsx(r,{variant:"body2",color:"initial",ml:1,children:"Resultado:"}),e.jsx(r,{variant:"body2",sx:({palette:i})=>({color:a.result===0?i.warning.main:a.result===1?i.primary.main:i.error.main}),ml:1,children:w[a.result||0]})]}),(a==null?void 0:a.bets)&&a.bets.map((i,c)=>{var s,l,n,m,p;return e.jsx("div",{children:o&&e.jsxs(f,{elevation:3,sx:D=>({mb:1,p:2,backgroundColor:D.palette.background.default}),children:[e.jsxs(t,{display:"flex",flexDirection:"row",mb:.5,children:[e.jsx(r,{variant:"subtitle2",color:"initial",children:"Odd:"}),e.jsx(r,{variant:"subtitle2",color:"primary",ml:1,children:i.rate})]}),e.jsxs(t,{display:"flex",flexDirection:"row",mb:.5,children:[e.jsx(r,{variant:"subtitle2",color:"initial",children:"Palpite:"}),e.jsx(r,{variant:"subtitle2",color:"primary",ml:1,children:i.bet_choice===1?(s=i.game)==null?void 0:s.home_name:i.bet_choice===-1?(l=i.game)==null?void 0:l.away_name:"Empate"})]}),e.jsx(t,{display:"flex",flexDirection:"row",justifyContent:"space-between",mb:.5,children:e.jsxs(t,{display:"flex",children:[e.jsx(r,{variant:"subtitle2",color:"initial",children:"Jogo:"}),e.jsx(r,{variant:"subtitle2",color:"primary",ml:1,children:((n=i.game)==null?void 0:n.home_name)+" vs "+((m=i.game)==null?void 0:m.away_name)})]})}),e.jsxs(t,{display:"flex",flexDirection:"row",justifyContent:"space-between",children:[e.jsxs(t,{display:"flex",children:[e.jsx(r,{variant:"subtitle2",color:"initial",children:"Data do Jogo:"}),e.jsx(r,{variant:"subtitle2",color:"primary",ml:1,children:j((p=i.game)==null?void 0:p.time_close_bet).format("DD/MM/YYYY hh:mm")})]}),e.jsxs(t,{display:"flex",children:[e.jsx(r,{variant:"subtitle2",color:"initial",children:"Resultado do jogo:"}),i.game&&i.game.done?e.jsx(e.Fragment,{children:i.bet_choice===i.game.result?e.jsx(r,{variant:"subtitle2",color:"primary",ml:1,children:"Vitória"}):e.jsx(r,{variant:"subtitle2",color:"error",ml:1,children:"Derrota"})}):e.jsx(r,{variant:"subtitle2",color:"warning",ml:1,children:"Aberto"})]})]})]})},c)})]})})}const H=[{field:"",headerName:"",sortable:!1,headerClassName:"super-hidden",flex:1,renderCell:a=>e.jsx(O,{paper:a.row})}];function L(){const{userPapers:a}=y().props,[o,d]=x.useState("-1"),[i,c]=x.useState(),s=(l,n)=>{d(n),h.get("",{search:i,type:n},{preserveState:!0,only:["userPapers"],preserveScroll:!0})};return x.useEffect(()=>{d("-1")},[]),e.jsxs(f,{elevation:5,variant:"indicator",children:[e.jsx(t,{display:"flex",alignItems:"center",children:e.jsx(v,{value:o,children:e.jsx(t,{sx:{borderBottom:1,borderColor:"divider"},children:e.jsxs(C,{onChange:s,"aria-label":"lab API tabs example",children:[e.jsx(b,{label:e.jsxs("div",{children:["Apostas Abertas",e.jsx(g,{color:"primary",sx:{ml:1,borderRadius:"5px"},size:"small",label:a.data.filter(l=>l.status===-1).reduce((l,{deposit:n})=>l+1,0)})]}),value:"-1"}),e.jsx(b,{label:e.jsxs("div",{children:["Apostas Encerradas",e.jsx(g,{sx:{ml:1,borderRadius:"5px"},color:"error",size:"small",label:a.data.filter(l=>l.status===1).reduce((l,{deposit:n})=>l+1,0)})]}),value:"1"})]})})})}),a&&a.data.length===0?e.jsx(t,{padding:10,children:e.jsx(r,{variant:"body1",color:"gray",textAlign:"center",children:"Não há dados"})}):e.jsx(S,{disableRowSelectionOnClick:!0,disableColumnSelector:!0,rows:a.data,rowCount:a.total,paginationMode:"server",columns:H,density:"comfortable",getRowHeight:()=>"auto",initialState:{pagination:{paginationModel:{page:a.current_page-1,pageSize:a.per_page}}},onPaginationModelChange:(l,n)=>{h.get("/transacoes",{page:l.page+1,per_page:l.pageSize},{preserveState:!0,only:["userPapers"]})},sx:{"& .MuiDataGrid-columnHeaders":{display:"none"},"& .MuiDataGrid-row:hover":{backgroundColor:"inherit"}},checkboxSelection:!1})]})}N.register(Y,z,B);function q(){const{data_donut:a}=y().props,[o,d]=x.useState(),i=["Futebol","Volei","Basquete","Baisebol","Boxe","Fut. Americano","Tênis","Outros"],c={responsive:!0,cutout:100,plugins:{legend:{position:"bottom"},title:{display:!0,text:"Chart.js Doughnut Chart"}}};x.useEffect(()=>{d(a)},[a]);const s={labels:i,datasets:[{label:" Quantidade",data:o,borderRadius:3,backgroundColor:["#23af00","#29cf00","#30ef00","#3fff10","#59ff30","#59ff30","#a6ff8f","#bfffaf"],borderColor:["#23af00","#29cf00","#30ef00","#3fff10","#59ff30","#59ff30","#a6ff8f","#bfffaf"],borderWidth:2}]};return e.jsx(e.Fragment,{children:e.jsx(f,{sx:{maxHeight:"759px"},children:e.jsxs(t,{sx:{maxHeight:"359px"},padding:4,display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",children:[e.jsx(r,{variant:"body1",color:"initial",textAlign:"center",my:2,children:"Apostas por esportes"}),e.jsx(F,{options:c,data:s,redraw:!0})]})})})}function oe({auth:a,bets:o,userPapers:d}){return e.jsxs(A,{user:a.user,children:[e.jsx(_,{title:"Apostas"}),e.jsxs(t,{children:[e.jsx(r,{variant:"h5",mb:2,children:"APOSTAS"}),e.jsxs(u,{container:!0,spacing:2,children:[e.jsx(u,{item:!0,xs:8,children:e.jsx(G,{bets:o})}),e.jsx(u,{item:!0,xs:4,children:e.jsx(q,{})}),e.jsx(u,{item:!0,xs:5}),d.data&&e.jsx(e.Fragment,{children:e.jsx(u,{item:!0,xs:12,children:e.jsx(L,{})})})]})]})]})}export{oe as default};
