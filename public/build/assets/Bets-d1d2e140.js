import{q as y,r as m,j as e,y as h,b as _}from"./app-e6c6eb97.js";import{A as T}from"./AuthenticatedLayout-5913d5c7.js";import{T as v,a as S,b as f,C as g,d as A,D as C}from"./Search-f8af4227.js";import{B as t}from"./Box-f02aa32a.js";import{T as P}from"./TextField-b4888284.js";import{I as M}from"./InputAdornment-be0a38bb.js";import{f as k,g as I}from"./helper-545a7ee1.js";import{P as j}from"./Menu-51edda3b.js";import{G as p}from"./Grid-30a9ff22.js";import{h as b}from"./moment-fbc5633a.js";import{T as a}from"./Typography-26d0e95c.js";import{B as N}from"./Button-0345e015.js";import"./createSvgIcon-b43d0311.js";import"./IconButton-3fdc4450.js";import"./Close-5436452c.js";function R({resource:r}){const{bets:n}=y().props,[d,i]=m.useState(""),[c,l]=m.useState(),s=(x,u)=>{i(u),r&&h.get(r,{search:c,status:u},{preserveState:!0})},o=x=>{l(x.target.value),h.get("",{search:x.target.value},{preserveState:!0})};return e.jsxs(t,{display:"flex",alignItems:"center",children:[e.jsx(v,{value:d,children:e.jsx(t,{sx:{borderBottom:1,borderColor:"divider"},children:e.jsx(S,{onChange:s,"aria-label":"lab API tabs example",children:e.jsx(f,{label:e.jsxs("div",{children:["Todos",e.jsx(g,{sx:{background:"white",color:"black",ml:1,borderRadius:"5px"},size:"small",label:(n==null?void 0:n.total)||0})]}),value:""})})})}),e.jsx(t,{mr:4,flex:1,display:"flex",flexDirection:"row",justifyContent:"end",alignItems:"center",children:e.jsx(P,{InputProps:{startAdornment:e.jsx(M,{position:"start",children:e.jsx(A,{sx:{color:"#fff"}})})},InputLabelProps:{shrink:!1},color:"secondary",required:!0,id:"search",placeholder:"Buscar",name:"search",value:c,onChange:o})})]})}function Y({bets:r,resource:n}){const d=[{field:"user_id",headerName:"ID",sortable:!1,flex:1},{field:"name",headerName:"Nome",sortable:!1,flex:1},{field:"total_bets",headerName:"Apostas",type:"number",headerAlign:"left",align:"left",flex:1,valueGetter:l=>l.row.total_bets},{field:"amount",headerName:"Saldo",type:"number",headerAlign:"left",align:"left",flex:1,valueGetter:l=>k.format(l.row.amount)}],[i,c]=m.useState([]);return e.jsxs(e.Fragment,{children:[e.jsxs(j,{elevation:5,variant:"indicator",children:[e.jsx(R,{}),e.jsx(C,{getRowId:l=>l.user_id,disableRowSelectionOnClick:!0,disableColumnSelector:!0,rows:r.data,rowCount:r.total,paginationMode:"server",columns:d,density:"comfortable",initialState:{pagination:{paginationModel:{page:r.current_page-1,pageSize:r.per_page}}},onPaginationModelChange:(l,s)=>{h.get("/apostas",{page:l.page+1,per_page:l.pageSize},{only:["bets"],preserveState:!0})},checkboxSelection:!0,rowSelectionModel:i,onRowSelectionModelChange:l=>{if(l.length>1){const s=new Set(i),o=l.filter(x=>!s.has(x));h.visit(route("bets",{id:o[0]}),{method:"get",only:["userPapers"],preserveState:!0}),c(o)}else h.visit(route("bets",{id:l[0]}),{method:"get",only:["userPapers"],preserveState:!0}),c(l)}})]}),e.jsx(p,{item:!0,xs:12,children:e.jsx(j,{sx:({palette:l})=>({backgroundColor:l.background.default})})})]})}var w=(r=>(r[r.Vitoria=1]="Vitoria",r[r.Aberto=0]="Aberto",r[r.Derrota=-1]="Derrota",r))(w||{});function z({paper:r}){const[n,d]=m.useState(!1);return e.jsx(j,{sx:{width:"100%"},children:e.jsxs(t,{p:2,children:[e.jsxs(t,{display:"flex",justifyContent:"space-between",mb:.5,children:[e.jsxs(t,{display:"flex",children:[e.jsx(a,{variant:"body2",color:"initial",children:"Aposta:"}),e.jsx(a,{variant:"body2",color:"primary",ml:1,children:r.quantity>1?"Múltipla":"Única"}),e.jsx(a,{variant:"body2",color:"initial",ml:2,children:"Odd:"}),e.jsx(a,{variant:"body2",color:"primary",ml:1,children:r.rate})]}),e.jsx(t,{display:"flex",children:e.jsx(N,{variant:"text",color:"primary",onClick:()=>d(!n),children:"detalhes"})})]}),e.jsxs(t,{display:"flex",justifyContent:"space-between",mb:.5,children:[e.jsxs(t,{display:"flex",children:[e.jsx(a,{variant:"body2",color:"initial",children:"Palpite:"}),e.jsx(a,{variant:"body2",color:"primary",ml:1,children:I(r.bets)})]}),e.jsxs(t,{display:"flex",children:[e.jsx(a,{variant:"body2",color:"initial",children:"Valor:"}),e.jsxs(a,{variant:"body2",color:"primary",ml:1,children:["R$ ",r.amount]}),e.jsx(a,{variant:"body2",color:"initial",ml:1,children:"Lucro possível:"}),e.jsxs(a,{variant:"body2",color:"primary",ml:1,children:["R$ ",r.profit]})]})]}),e.jsxs(t,{display:"flex",justifyContent:"space-between",mb:.5,children:[e.jsxs(t,{display:"flex",children:[e.jsx(a,{variant:"body2",color:"initial",children:"Jogos:"}),e.jsx(a,{variant:"body2",color:"primary",ml:1,children:r.bets.length})]}),e.jsxs(t,{display:"flex",children:[e.jsx(a,{variant:"body2",color:"initial",children:"Data da aposta:"}),e.jsx(a,{variant:"body2",color:"primary",ml:1,children:b(r.created_at).format("DD/MM/YYYY")}),e.jsx(a,{variant:"body2",color:"initial",ml:1,children:"Hora:"}),e.jsx(a,{variant:"body2",color:"primary",ml:1,children:b(r.created_at).format("hh:mm")})]})]}),e.jsxs(t,{display:"flex",justifyContent:"end",children:[e.jsx(a,{variant:"body2",color:"initial",ml:1,children:"Resultado:"}),e.jsx(a,{variant:"body2",sx:({palette:i})=>({color:r.result===0?i.warning.main:r.result===1?i.primary.main:i.error.main}),ml:1,children:w[r.result||0]})]}),(r==null?void 0:r.bets)&&r.bets.map((i,c)=>{var l,s,o,x,u;return e.jsx("div",{children:n&&e.jsxs(j,{elevation:3,sx:D=>({mb:1,p:2,backgroundColor:D.palette.background.default}),children:[e.jsxs(t,{display:"flex",flexDirection:"row",mb:.5,children:[e.jsx(a,{variant:"subtitle2",color:"initial",children:"Odd:"}),e.jsx(a,{variant:"subtitle2",color:"primary",ml:1,children:i.rate})]}),e.jsxs(t,{display:"flex",flexDirection:"row",mb:.5,children:[e.jsx(a,{variant:"subtitle2",color:"initial",children:"Palpite:"}),e.jsx(a,{variant:"subtitle2",color:"primary",ml:1,children:i.bet_choice===1?(l=i.game)==null?void 0:l.home_name:i.bet_choice===-1?(s=i.game)==null?void 0:s.away_name:"Empate"})]}),e.jsx(t,{display:"flex",flexDirection:"row",justifyContent:"space-between",mb:.5,children:e.jsxs(t,{display:"flex",children:[e.jsx(a,{variant:"subtitle2",color:"initial",children:"Jogo:"}),e.jsx(a,{variant:"subtitle2",color:"primary",ml:1,children:((o=i.game)==null?void 0:o.home_name)+" vs "+((x=i.game)==null?void 0:x.away_name)})]})}),e.jsxs(t,{display:"flex",flexDirection:"row",justifyContent:"space-between",children:[e.jsxs(t,{display:"flex",children:[e.jsx(a,{variant:"subtitle2",color:"initial",children:"Data do Jogo:"}),e.jsx(a,{variant:"subtitle2",color:"primary",ml:1,children:b((u=i.game)==null?void 0:u.time_close_bet).format("DD/MM/YYYY hh:mm")})]}),e.jsxs(t,{display:"flex",children:[e.jsx(a,{variant:"subtitle2",color:"initial",children:"Resultado do jogo:"}),i.game&&i.game.done?e.jsx(e.Fragment,{children:i.bet_choice===i.game.result?e.jsx(a,{variant:"subtitle2",color:"primary",ml:1,children:"Vitória"}):e.jsx(a,{variant:"subtitle2",color:"error",ml:1,children:"Derrota"})}):e.jsx(a,{variant:"subtitle2",color:"warning",ml:1,children:"Aberto"})]})]})]})},c)})]})})}const G=[{field:"",headerName:"",sortable:!1,headerClassName:"super-hidden",flex:1,renderCell:r=>e.jsx(z,{paper:r.row})}];function E(){const{userPapers:r}=y().props,[n,d]=m.useState("-1"),[i,c]=m.useState(),l=(s,o)=>{d(o),h.get("",{search:i,type:o},{preserveState:!0,only:["userPapers"],preserveScroll:!0})};return m.useEffect(()=>{d("-1")},[]),e.jsxs(j,{elevation:5,variant:"indicator",children:[e.jsx(t,{display:"flex",alignItems:"center",children:e.jsx(v,{value:n,children:e.jsx(t,{sx:{borderBottom:1,borderColor:"divider"},children:e.jsxs(S,{onChange:l,"aria-label":"lab API tabs example",children:[e.jsx(f,{label:e.jsxs("div",{children:["Apostas Abertas",e.jsx(g,{color:"primary",sx:{ml:1,borderRadius:"5px"},size:"small",label:r.data.filter(s=>s.status===-1).reduce((s,{deposit:o})=>s+1,0)})]}),value:"-1"}),e.jsx(f,{label:e.jsxs("div",{children:["Apostas Encerradas",e.jsx(g,{sx:{ml:1,borderRadius:"5px"},color:"error",size:"small",label:r.data.filter(s=>s.status===1).reduce((s,{deposit:o})=>s+1,0)})]}),value:"1"})]})})})}),r&&r.data.length===0?e.jsx(t,{padding:10,children:e.jsx(a,{variant:"body1",color:"gray",textAlign:"center",children:"Não há dados"})}):e.jsx(C,{disableRowSelectionOnClick:!0,disableColumnSelector:!0,rows:r.data,rowCount:r.total,paginationMode:"server",columns:G,density:"comfortable",getRowHeight:()=>"auto",initialState:{pagination:{paginationModel:{page:r.current_page-1,pageSize:r.per_page}}},onPaginationModelChange:(s,o)=>{h.get("/transacoes",{page:s.page+1,per_page:s.pageSize},{preserveState:!0,only:["userPapers"]})},sx:{"& .MuiDataGrid-columnHeaders":{display:"none"},"& .MuiDataGrid-row:hover":{backgroundColor:"inherit"}},checkboxSelection:!1})]})}function ee({auth:r,bets:n,userPapers:d}){return e.jsxs(T,{user:r.user,children:[e.jsx(_,{title:"Apostas"}),e.jsxs(t,{children:[e.jsx(a,{variant:"h5",mb:2,children:"APOSTAS"}),e.jsxs(p,{container:!0,spacing:2,children:[e.jsx(p,{item:!0,xs:7,children:e.jsx(Y,{bets:n})}),e.jsx(p,{item:!0,xs:5}),d.data&&e.jsx(e.Fragment,{children:e.jsx(p,{item:!0,xs:12,children:e.jsx(E,{})})})]})]})]})}export{ee as default};
