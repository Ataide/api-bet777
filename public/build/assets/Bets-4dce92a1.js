import{q as w,r as x,j as e,y as u,b as M}from"./app-f8b9ab11.js";import{A as k}from"./AuthenticatedLayout-cef06b8b.js";import{D as I,C as R,A as N,p as E,a as z}from"./index-9fa7db18.js";import{P as j}from"./Menu-59a589f9.js";import{B as i}from"./Box-7f40d207.js";import{T as a}from"./ButtonBase-321d2179.js";import{g as B,f}from"./helper-545a7ee1.js";import{T as D,a as A,b as y,C as g,d as H,D as F,S as v}from"./Search-6234e3b5.js";import{T as Y}from"./TextField-f2593e54.js";import{I as G}from"./InputAdornment-e0619d73.js";import{h as S}from"./moment-fbc5633a.js";import{B as O}from"./Button-5a8dee08.js";import{N as _}from"./NotFoundData-9dcfe424.js";import{G as b}from"./Grid-a93bfbb2.js";import"./createSvgIcon-a46bca50.js";import"./IconButton-e88a4fd3.js";import"./Close-24258ab2.js";R.register(N,E,z);function L(){const{data_donut:t}=w().props,[d,l]=x.useState(),r=["Futebol","Volei","Basquete","Baisebol","Boxe","Fut. Americano","Tênis","Outros"],n={responsive:!0,cutout:80,plugins:{legend:{align:"start",position:"bottom"}}};x.useEffect(()=>{l(t)},[t]);const c={labels:r,datasets:[{label:"Quantidade",data:d,borderRadius:0,backgroundColor:["#59FFA3","#59C3FF","#597DFF","#9159FF","#FF59E5","#FF5959","#7AFF59","#59ff30"],borderColor:["#59FFA3","#59C3FF","#597DFF","#9159FF","#FF59E5","#FF5959","#7AFF59","#59ff30"],borderWidth:1}]};return e.jsx(e.Fragment,{children:e.jsx(j,{sx:{maxHeight:"759px"},variant:"indicator",children:e.jsxs(i,{sx:{maxHeight:"359px"},padding:4,display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",children:[e.jsx(a,{variant:"body1",color:"initial",textAlign:"center",my:2,children:"Apostas por esportes"}),e.jsx(I,{options:n,data:c})]})})})}function q({resource:t,itemSelected:d}){const{bets:l,userPapers:r}=w().props,[n,c]=x.useState(""),[h,m]=x.useState(),p=new URLSearchParams(window.location.search),s=o=>{m(o.target.value),u.get("",{search:o.target.value},{preserveState:!0})};return e.jsxs(i,{display:"flex",alignItems:"center",children:[e.jsx(D,{value:n,children:e.jsx(i,{sx:{borderBottom:1,borderColor:"divider",minHeight:"64px"},children:e.jsx(A,{"aria-label":"lab API tabs example",children:e.jsx(y,{label:e.jsxs("div",{children:["Todos",e.jsx(g,{sx:{background:"white",color:"black",ml:1,borderRadius:"5px"},size:"small",label:(l==null?void 0:l.total)||0})]}),value:""})})})}),!p.get("id")&&e.jsx(i,{mr:4,flex:1,display:"flex",flexDirection:"row",justifyContent:"end",alignItems:"center",children:e.jsx(Y,{InputProps:{startAdornment:e.jsx(G,{position:"start",children:e.jsx(H,{sx:{color:"#fff"}})})},InputLabelProps:{shrink:!1},color:"secondary",id:"search",placeholder:"Buscar",name:"search",value:h,onChange:s})})]})}var P=(t=>(t[t.Vitoria=1]="Vitoria",t[t.Aberto=0]="Aberto",t[t.Derrota=-1]="Derrota",t))(P||{});function V({paper:t}){const[d,l]=x.useState(!1);return e.jsx(j,{sx:{width:"100%"},children:e.jsxs(i,{p:2,children:[e.jsxs(i,{display:"flex",justifyContent:"space-between",mb:.5,children:[e.jsxs(i,{display:"flex",children:[e.jsx(a,{variant:"body2",color:"initial",children:"Aposta:"}),e.jsx(a,{variant:"body2",color:"primary",ml:1,children:t.quantity>1?"Múltipla":"Única"}),e.jsx(a,{variant:"body2",color:"initial",ml:2,children:"Odd:"}),e.jsx(a,{variant:"body2",color:"primary",ml:1,children:t.rate})]}),e.jsx(i,{display:"flex",children:e.jsx(O,{variant:"text",color:"primary",onClick:()=>l(!d),children:"detalhes"})})]}),e.jsxs(i,{display:"flex",justifyContent:"space-between",mb:.5,children:[e.jsxs(i,{display:"flex",children:[e.jsx(a,{variant:"body2",color:"initial",children:"Palpite:"}),e.jsx(a,{variant:"body2",color:"primary",ml:1,children:B(t.bets)})]}),e.jsxs(i,{display:"flex",children:[e.jsx(a,{variant:"body2",color:"initial",children:"Valor:"}),e.jsxs(a,{variant:"body2",color:"primary",ml:1,children:["R$ ",t.amount]}),e.jsx(a,{variant:"body2",color:"initial",ml:1,children:"Lucro possível:"}),e.jsxs(a,{variant:"body2",color:"primary",ml:1,children:["R$ ",t.profit]})]})]}),e.jsxs(i,{display:"flex",justifyContent:"space-between",mb:.5,children:[e.jsxs(i,{display:"flex",children:[e.jsx(a,{variant:"body2",color:"initial",children:"Jogos:"}),e.jsx(a,{variant:"body2",color:"primary",ml:1,children:t.bets.length})]}),e.jsxs(i,{display:"flex",children:[e.jsx(a,{variant:"body2",color:"initial",children:"Data da aposta:"}),e.jsx(a,{variant:"body2",color:"primary",ml:1,children:S(t.created_at).format("DD/MM/YYYY")}),e.jsx(a,{variant:"body2",color:"initial",ml:1,children:"Hora:"}),e.jsx(a,{variant:"body2",color:"primary",ml:1,children:S(t.created_at).format("hh:mm")})]})]}),e.jsxs(i,{display:"flex",justifyContent:"end",children:[e.jsx(a,{variant:"body2",color:"initial",ml:1,children:"Resultado:"}),e.jsx(a,{variant:"body2",sx:({palette:r})=>({color:t.result===0?r.warning.main:t.result===1?r.primary.main:r.error.main}),ml:1,children:P[t.result||0]})]}),(t==null?void 0:t.bets)&&t.bets.map((r,n)=>{var c,h,m,p,s;return e.jsx("div",{children:d&&e.jsxs(j,{elevation:3,sx:o=>({mb:1,p:2,backgroundColor:o.palette.background.default}),children:[e.jsxs(i,{display:"flex",flexDirection:"row",mb:.5,children:[e.jsx(a,{variant:"subtitle2",color:"initial",children:"Odd:"}),e.jsx(a,{variant:"subtitle2",color:"primary",ml:1,children:r.rate})]}),e.jsxs(i,{display:"flex",flexDirection:"row",mb:.5,children:[e.jsx(a,{variant:"subtitle2",color:"initial",children:"Palpite:"}),e.jsx(a,{variant:"subtitle2",color:"primary",ml:1,children:r.bet_choice===1?(c=r.game)==null?void 0:c.home_name:r.bet_choice===-1?(h=r.game)==null?void 0:h.away_name:"Empate"})]}),e.jsx(i,{display:"flex",flexDirection:"row",justifyContent:"space-between",mb:.5,children:e.jsxs(i,{display:"flex",children:[e.jsx(a,{variant:"subtitle2",color:"initial",children:"Jogo:"}),e.jsx(a,{variant:"subtitle2",color:"primary",ml:1,children:((m=r.game)==null?void 0:m.home_name)+" vs "+((p=r.game)==null?void 0:p.away_name)})]})}),e.jsxs(i,{display:"flex",flexDirection:"row",justifyContent:"space-between",children:[e.jsxs(i,{display:"flex",children:[e.jsx(a,{variant:"subtitle2",color:"initial",children:"Data do Jogo:"}),e.jsx(a,{variant:"subtitle2",color:"primary",ml:1,children:S((s=r.game)==null?void 0:s.time_close_bet).format("DD/MM/YYYY hh:mm")})]}),e.jsxs(i,{display:"flex",children:[e.jsx(a,{variant:"subtitle2",color:"initial",children:"Resultado do jogo:"}),r.game&&r.game.done?e.jsx(e.Fragment,{children:r.bet_choice===r.game.result?e.jsx(a,{variant:"subtitle2",color:"primary",ml:1,children:"Vitória"}):e.jsx(a,{variant:"subtitle2",color:"error",ml:1,children:"Derrota"})}):e.jsx(a,{variant:"subtitle2",color:"warning",ml:1,children:"Aberto"})]})]})]})},n)})]})})}function J(){const t=[{field:"user_id",headerName:"ID",sortable:!1,flex:1},{field:"name",headerName:"Nome",sortable:!1,flex:1},{field:"total_bets",headerName:"Apostas",type:"number",headerAlign:"left",align:"left",flex:1,valueGetter:s=>s.row.total_bets},{field:"amount",headerName:"Saldo",type:"number",headerAlign:"left",align:"left",flex:1,valueGetter:s=>f.format(s.row.amount)}],d=[{field:"",headerName:"",sortable:!1,headerClassName:"super-hidden",flex:1,renderCell:s=>e.jsx(V,{paper:s.row})}],{bets:l,userPapers:r}=w().props,[n,c]=x.useState([]),[h,m]=x.useState(""),p=(s,o)=>{m(o),u.get("",{type:o},{preserveState:!0,only:["userPapers"],preserveScroll:!0})};return x.useEffect(()=>{m("")},[n]),e.jsx(e.Fragment,{children:e.jsxs(b,{container:!0,spacing:2,children:[e.jsx(b,{item:!0,xs:8,children:e.jsxs(j,{elevation:5,variant:"indicator",sx:{minHeight:"625px"},children:[e.jsx(q,{}),l.data.length>0?e.jsx(F,{getRowId:s=>s.user_id,disableRowSelectionOnClick:!0,disableColumnSelector:!0,rows:l.data,rowCount:l.total,paginationMode:"server",columns:t,density:"comfortable",initialState:{pagination:{paginationModel:{page:l.current_page-1,pageSize:l.per_page}}},onPaginationModelChange:(s,o)=>{u.get("/apostas",{page:s.page+1,per_page:s.pageSize},{only:["bets"],preserveState:!0})},checkboxSelection:!0,rowSelectionModel:n,sx:{minHeight:"540px"},onRowSelectionModelChange:s=>{if(s.length>1){const o=new Set(n),C=s.filter(T=>!o.has(T));u.visit(route("bets",{id:C[0]}),{method:"get",only:["userPapers","data_donut"],preserveState:!0,preserveScroll:!0}),c(C)}else u.visit(route("bets",{id:s[0]}),{method:"get",only:["userPapers","data_donut"],preserveState:!0,preserveScroll:!0}),c(s)}}):e.jsx(_,{})]})}),e.jsxs(b,{item:!0,xs:4,spacing:2,children:[e.jsx(L,{}),e.jsx(j,{variant:"indicator",sx:{mt:2},children:r.data.length>0?e.jsxs(i,{p:2,children:[e.jsxs(a,{variant:"body1",color:"initial",children:["Cliente:"," ",e.jsx(a,{variant:"body1",component:"span",color:"initial",fontWeight:400,children:r.userDetails.name})]}),e.jsxs(v,{direction:"row",spacing:4,children:[e.jsxs(v,{direction:"column",children:[e.jsxs(a,{variant:"body2",display:"inline",children:["Todas as apostas:",e.jsx(a,{component:"span",variant:"body1",color:"primary",ml:1,children:r.total_open+r.total_close})]}),e.jsxs(a,{variant:"body2",display:"inline",children:["Saldo total:",e.jsx(a,{component:"span",variant:"body1",color:"primary",ml:1,children:f.format(r.userDetails.wallet.amount)})]})]}),e.jsxs(v,{direction:"column",children:[e.jsxs(a,{variant:"body2",display:"inline",children:["Saldo apostas:",e.jsx(a,{component:"span",variant:"body1",color:"primary",ml:1,children:f.format(r.userDetails.wallet.bet_total)})]}),e.jsxs(a,{variant:"body2",display:"inline",children:["Saldo livre pra saque:",e.jsx(a,{component:"span",variant:"body1",color:"primary",ml:1,children:f.format(r.userDetails.wallet.draw_total)})]})]})]})]}):e.jsx(_,{})})]}),e.jsx(b,{}),e.jsx(b,{item:!0,xs:12,children:e.jsxs(j,{elevation:5,variant:"indicator",children:[e.jsx(i,{display:"flex",alignItems:"center",children:e.jsx(D,{value:h,children:e.jsx(i,{sx:{borderBottom:1,borderColor:"divider"},children:e.jsxs(A,{onChange:p,"aria-label":"lab API tabs example",children:[e.jsx(y,{label:e.jsxs("div",{children:["Todas",e.jsx(g,{color:"primary",sx:{ml:1,borderRadius:"5px"},size:"small",label:r.total_open+r.total_close})]}),value:""}),e.jsx(y,{label:e.jsxs("div",{children:["Apostas Abertas",e.jsx(g,{color:"primary",sx:{ml:1,borderRadius:"5px"},size:"small",label:r.total_open})]}),value:"-1"}),e.jsx(y,{label:e.jsxs("div",{children:["Apostas Encerradas",e.jsx(g,{sx:{ml:1,borderRadius:"5px"},color:"error",size:"small",label:r.total_close||0})]}),value:"1"})]})})})}),r&&r.data.length===0?e.jsx(i,{padding:10,children:e.jsx(a,{variant:"body1",color:"gray",textAlign:"center",children:"Não há dados"})}):e.jsx(F,{disableRowSelectionOnClick:!0,disableColumnSelector:!0,rows:r.data,rowCount:r.total,paginationMode:"server",columns:d,density:"comfortable",getRowHeight:()=>"auto",initialState:{pagination:{paginationModel:{page:r.current_page-1,pageSize:r.per_page}}},onPaginationModelChange:(s,o)=>{u.get("",{page:s.page+1,per_page:s.pageSize},{preserveState:!0,only:["userPapers"],preserveScroll:!0})},sx:{"& .MuiDataGrid-columnHeaders":{display:"none"},"& .MuiDataGrid-row:hover":{backgroundColor:"inherit"}},checkboxSelection:!1})]})})]})})}function ce({auth:t,bets:d,userPapers:l}){return e.jsxs(k,{user:t.user,children:[e.jsx(M,{title:"Apostas"}),e.jsxs(i,{children:[e.jsx(a,{variant:"h5",mb:2,children:"APOSTAS"}),e.jsx(J,{})]})]})}export{ce as default};
