import{j as e,q as O,r as x,y as b,W as $,Q as H,a as Q}from"./app-d474efe3.js";import{T as J,a as K,b as T,C as D,d as V,D as X,S as Y}from"./Search-76d246a0.js";import{d as q,D as P,a as _,b as F}from"./ModeEditOutline-1eab211e.js";import{B as a}from"./Box-811b2274.js";import{T as h}from"./TextField-df7c8f05.js";import{I as Z}from"./InputAdornment-b57d9418.js";import{B as c}from"./Button-7fbd7d8a.js";import{I as p}from"./IconButton-11024606.js";import{D as L,a as N,b as R}from"./DialogContent-4476b551.js";import{c as ee,L as re,P as z}from"./Menu-78682ac7.js";import{L as ae,a as te,b as se,A as le}from"./AuthenticatedLayout-44fb3b0b.js";import{c as ie}from"./helper-545a7ee1.js";import{T as t}from"./Typography-ebeb4145.js";import{G as u}from"./Grid-78a74323.js";import"./Close-443fd761.js";import"./createSvgIcon-ef629464.js";import"./moment-fbc5633a.js";const ne=ee(e.jsx("path",{d:"M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"ChevronRight");function oe({resource:l,aproveHandle:g}){const{admins:m,pendings:v}=O().props,[f,C]=x.useState(!1),[y,S]=x.useState(""),[k,A]=x.useState(),j=(i,s)=>{S(s),l&&b.get(l,{search:k,status:s},{preserveState:!0})},n=i=>{A(i.target.value),l&&b.get(l,{search:i.target.value,status:y},{preserveState:!0})};return e.jsxs(e.Fragment,{children:[e.jsxs(a,{display:"flex",alignItems:"center",children:[e.jsx(J,{value:y,children:e.jsx(a,{sx:{borderBottom:1,borderColor:"divider"},children:e.jsxs(K,{onChange:j,"aria-label":"lab API tabs example",children:[e.jsx(T,{label:e.jsxs("div",{children:["Todos",e.jsx(D,{sx:{background:"white",color:"black",ml:1,borderRadius:"5px"},size:"small",label:m.total_users})]}),value:""}),e.jsx(T,{label:e.jsxs("div",{children:["Ativo",e.jsx(D,{color:"success",size:"small",label:m.total_actives,sx:{ml:1,borderRadius:"5px"}})]}),value:"Ativo"}),e.jsx(T,{label:e.jsxs("div",{children:["Novos",e.jsx(D,{color:"warning",size:"small",label:m.total_recents,sx:{ml:1,borderRadius:"5px"}})]}),value:"Novo"}),e.jsx(T,{label:e.jsxs("div",{children:["Inativos",e.jsx(D,{color:"error",size:"small",label:m.total_inactives,sx:{ml:1,borderRadius:"5px"}})]}),value:"Inativo"})]})})}),e.jsxs(a,{ml:2,flex:1,display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsx(h,{InputProps:{startAdornment:e.jsx(Z,{position:"start",children:e.jsx(V,{sx:{color:"#fff"}})})},InputLabelProps:{shrink:!1},color:"secondary",required:!0,id:"search",placeholder:"Buscar",name:"search",value:k,onChange:n}),e.jsxs(c,{variant:"contained",color:"primary",onClick:()=>C(!0),children:["Solicitações ",v.length]}),e.jsx(p,{"aria-label":"delete",sx:{mr:2},children:e.jsx(q,{sx:{color:"#ffffff"}})})]})]}),e.jsxs(L,{open:f,onClose:()=>C(!1),PaperProps:{sx:{backgroundColor:"#2e2e2e"}},maxWidth:"sm",fullWidth:!0,children:[e.jsx(P,{children:"Aguardando aprovação"}),e.jsx(p,{"aria-label":"close",onClick:()=>C(!1),sx:{position:"absolute",right:8,top:8,color:i=>i.palette.primary.main},children:e.jsx(_,{})}),e.jsx(N,{children:e.jsx(re,{children:v&&v.map(i=>e.jsx(ae,{sx:{margin:2},onClick:()=>g(i),children:e.jsx(te,{secondaryAction:e.jsx(p,{edge:"end","aria-label":"delete",children:e.jsx(ne,{color:"primary"})}),children:e.jsx(se,{primary:i.name})})},i.id))})})]})]})}function de({admins:l,resource:g}){const m=[{field:"fullName",headerName:"Nome",sortable:!1,flex:1,valueGetter:r=>`${r.row.name||""} ${r.row.lastName||""}`},{field:"profile.phone",headerName:"Telefone",sortable:!1,type:"number",headerAlign:"left",align:"left",flex:1,valueGetter:r=>r.row.profile.phone},{field:"email",sortable:!1,headerName:"E-mail",flex:1},{field:"status",headerName:"Status",sortable:!1,width:120,renderCell:r=>{switch(ie(r.row)||""){case"Ativo":return e.jsx(t,{variant:"body1",sx:{color:"success.main"},children:"Ativo"});case"Inativo":return e.jsx(t,{variant:"body1",color:"error",children:"Inativo"});case"Novo":return e.jsx(t,{sx:{color:"warning.main"},children:"Novo"});default:return e.jsx(t,{variant:"body1",children:r.row.profile.account_status})}}},{field:"",headerName:"Ações",sortable:!1,renderCell:r=>e.jsxs(Y,{direction:"row",children:[e.jsx(p,{"aria-label":"edit",sx:{mr:1},onClick:()=>B(r.row),children:e.jsx(F,{sx:{color:"#ffffff"}})}),e.jsx(p,{"aria-label":"edit",sx:{mr:1},onClick:()=>E(r.row),children:e.jsx(q,{sx:{color:"#ffffff"}})})]}),width:160}],[v,f]=x.useState(!1),[C,y]=x.useState(!1),[S,k]=x.useState(null),[A,j]=x.useState(!1),[n,i]=x.useState(!1),{errors:s}=O().props,B=r=>{d({...r.profile,...r}),f(!0)},M=r=>{d({...r.profile,...r}),j(!0),f(!0)},w=()=>{i(!1),j(!1),f(!1)},E=r=>{y(!0),k(r)},I=()=>{k(null),y(!1)},G=()=>{S&&b.delete(route("administration.destroy",{user:S}),{onSuccess:r=>{I()}})},{data:o,setData:d,post:he,processing:xe}=$({id:0,email:"",name:"",birthday:"",cpf:"",phone:"",pix_key:""}),U=r=>{r.preventDefault(),b.put(route("administration.update",o.id),o,{preserveState:!0,onSuccess:W=>{H.success("Update Success"),i(!1),f(!1)},onError:W=>{}})};return e.jsxs(e.Fragment,{children:[e.jsxs(z,{elevation:5,variant:"indicator",sx:{maxWidth:"100%"},children:[e.jsx(oe,{resource:g,aproveHandle:M}),l.data.length===0?e.jsx(a,{padding:10,children:e.jsx(t,{variant:"body1",color:"gray",textAlign:"center",children:"Não há dados"})}):e.jsx(X,{disableRowSelectionOnClick:!0,disableColumnSelector:!0,rows:l.data,rowCount:l.total,paginationMode:"server",columns:m,density:"comfortable",disableColumnFilter:!0,disableColumnMenu:!0,initialState:{pagination:{paginationModel:{page:l.current_page-1,pageSize:l.per_page}}},onPaginationModelChange:(r,W)=>{b.get("",{page:r.page+1,per_page:r.pageSize},{preserveState:!0})},pageSizeOptions:[5,10],checkboxSelection:!0})]}),e.jsxs(L,{open:v,onClose:w,PaperProps:{sx:{backgroundColor:"#2e2e2e"}},maxWidth:"md",fullWidth:!0,children:[e.jsx(P,{children:"Gerenciar Conta"}),e.jsx(p,{"aria-label":"close",onClick:w,sx:{position:"absolute",right:8,top:8,color:r=>r.palette.primary.main},children:e.jsx(_,{})}),e.jsx(N,{children:e.jsxs(a,{component:"form",id:"form_edit",onSubmit:U,noValidate:!0,sx:{mt:1,display:"flex",flexDirection:"row"},gap:2,children:[e.jsxs(a,{display:"flex",flexDirection:"column",gap:2,width:"100%",children:[e.jsxs(a,{width:"100%",children:[e.jsx(t,{variant:"subtitle2",color:"white",fontWeight:600,children:"Nome'"}),e.jsx(h,{fullWidth:!0,required:!0,disabled:!n,id:"name",name:"name",placeholder:"example@example.com",value:o.name,error:!!s.name,helperText:s.name,onChange:r=>d("name",r.target.value),InputLabelProps:{shrink:!1}})]}),e.jsxs(a,{width:"100%",children:[e.jsx(t,{variant:"subtitle2",color:"white",fontWeight:600,children:"CPF"}),e.jsx(h,{fullWidth:!0,required:!0,disabled:!n,id:"cpf",name:"cpf",placeholder:"22/04/1986",value:o.cpf,error:!!s.cpf,helperText:s.cpf,onChange:r=>d("cpf",r.target.value),InputLabelProps:{shrink:!1}})]}),e.jsxs(a,{width:"100%",children:[e.jsx(t,{variant:"subtitle2",color:"white",fontWeight:600,children:"Data de nascimento"}),e.jsx(h,{fullWidth:!0,required:!0,disabled:!n,id:"birthday",name:"birthday",placeholder:"1234567890",value:o.birthday,error:!!s.birthday,helperText:s.birthday,onChange:r=>d("birthday",r.target.value),InputLabelProps:{shrink:!1}})]}),e.jsxs(a,{width:"100%",children:[e.jsx(t,{variant:"subtitle2",color:"white",fontWeight:600,children:"Telefone"}),e.jsx(h,{fullWidth:!0,required:!0,disabled:!n,id:"phone",name:"phone",placeholder:"1234567890",value:o.phone,error:!!s.phone,helperText:s.phone,onChange:r=>d("phone",r.target.value),InputLabelProps:{shrink:!1}})]})]}),e.jsxs(a,{display:"flex",flexDirection:"column",gap:2,width:"100%",children:[e.jsxs(a,{width:"100%",children:[e.jsx(t,{variant:"subtitle2",color:"white",fontWeight:600,children:"Email"}),e.jsx(h,{fullWidth:!0,required:!0,disabled:!n,id:"email",name:"email",placeholder:"example@example.com",value:o.email,error:!!s.email,helperText:s.email,onChange:r=>d("email",r.target.value),InputLabelProps:{shrink:!1}})]}),e.jsxs(a,{width:"100%",children:[e.jsx(t,{variant:"subtitle2",color:"white",fontWeight:600,children:"Usuário"}),e.jsx(h,{fullWidth:!0,required:!0,disabled:!n,id:"name",name:"name",placeholder:"example@example.com",value:o.name,error:!!s.name,helperText:s.name,onChange:r=>d("name",r.target.value),InputLabelProps:{shrink:!1}})]}),e.jsxs(a,{width:"100%",children:[e.jsx(t,{variant:"subtitle2",color:"white",fontWeight:600,children:"Chave Pix"}),e.jsx(h,{fullWidth:!0,required:!0,disabled:!n,id:"pix_key",name:"pix_key",placeholder:"example@example.com",value:o.pix_key,error:!!s.pix_key,helperText:s.pix_key,onChange:r=>d("pix_key",r.target.value),InputLabelProps:{shrink:!1}})]})]})]})}),e.jsxs(R,{sx:{display:"flex",p:3},children:[!n&&e.jsx(e.Fragment,{children:A?e.jsxs(e.Fragment,{children:[e.jsx(c,{variant:"contained",onClick:()=>{w(),j(!1),b.put(route("administration.aprove",{id:o.id}),{},{preserveState:!0})},children:"Aprovar"}),e.jsx(c,{variant:"outlined",onClick:()=>{w(),i(!1),j(!1)},children:"Recusar"})]}):e.jsxs(e.Fragment,{children:[e.jsx(a,{display:"flex",flexDirection:"row",flex:1,gap:2,children:e.jsx(c,{variant:"outlined",onClick:w,children:"Permissões"})}),e.jsx(c,{variant:"outlined",onClick:()=>{i(!0)},children:"Mudar informações"})]})}),n&&e.jsxs(e.Fragment,{children:[e.jsx(c,{variant:"contained",type:"submit",form:"form_edit",children:"Salvar"}),e.jsx(c,{variant:"outlined",onClick:()=>{i(!1)},children:"Cancelar"})]})]})]}),e.jsxs(L,{open:C,onClose:I,PaperProps:{sx:{backgroundColor:"#2e2e2e"}},maxWidth:"sm",fullWidth:!0,children:[e.jsx(P,{children:"Deletar contas"}),e.jsx(p,{"aria-label":"close",onClick:I,sx:{position:"absolute",right:8,top:8,color:r=>r.palette.primary.main},children:e.jsx(_,{})}),e.jsx(N,{children:e.jsx(t,{variant:"body1",fontWeight:400,children:"Tem certeza que desenha deletar esse administrador?"})}),e.jsx(R,{sx:{display:"flex",p:3},children:e.jsxs(e.Fragment,{children:[e.jsx(c,{variant:"contained",color:"error",onClick:()=>G(),children:"Deletar"}),e.jsx(c,{variant:"outlined",onClick:I,children:"Cancelar"})]})})]})]})}function We({auth:l,admins:g,superuser:m}){return e.jsxs(le,{user:l.user,children:[e.jsx(Q,{title:"Administração"}),e.jsxs(a,{children:[e.jsx(t,{variant:"h5",mb:2,children:"ADMINISTRAÇÃO / DONO"}),e.jsxs(u,{container:!0,spacing:2,children:[e.jsx(u,{item:!0,xs:12,children:e.jsx(ce,{})}),e.jsx(u,{item:!0,xs:12,children:e.jsx(de,{admins:g,resource:"/administracao"})})]})]})]})}function ce(){const{superuser:l}=O().props;return e.jsx(z,{elevation:5,variant:"indicator",children:e.jsx(a,{p:4,children:e.jsxs(u,{container:!0,columns:14,children:[e.jsx(u,{item:!0,xs:4,children:e.jsx(a,{display:"flex",height:40,alignItems:"center",children:e.jsx(t,{variant:"body1",children:l.name})})}),e.jsx(u,{item:!0,xs:4,children:e.jsx(a,{display:"flex",height:40,alignItems:"center",children:e.jsx(t,{variant:"body1",children:"88 99356-8477"})})}),e.jsx(u,{item:!0,xs:4,children:e.jsx(a,{display:"flex",height:40,alignItems:"center",children:e.jsx(t,{variant:"body1",children:l.email})})}),e.jsx(u,{item:!0,xs:2,children:e.jsxs(a,{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",children:[e.jsx(t,{variant:"body1",sx:{color:"success.main"},children:"Ativo"}),e.jsx(p,{"aria-label":"edit",sx:{mr:1},onClick:()=>{},children:e.jsx(F,{sx:{color:"#ffffff"}})})]})})]})})})}export{We as default};
