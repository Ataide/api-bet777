import{q as F,r as k,j as e,y as S,f as Y,g as z,h as $,i as V,t as I,k as J,m as y,n as K,o as Q,W as Z,p as ee,b as te}from"./app-afe865fe.js";import{T as re,a as ae,b as oe,C as se,d as ne,D as le,S as ie}from"./Search-e698c6e3.js";import{d as L,D as O,a as A,b as de}from"./ModeEditOutline-5574a7fd.js";import{D as q}from"./DatePicker-eb37d1f2.js";import{B as p}from"./Box-0a9b8054.js";import{B as j}from"./Button-9f098e69.js";import{T as G,F as ce,S as fe}from"./TextField-b93b8230.js";import{I as ue}from"./InputAdornment-ee2c4a24.js";import{I as _}from"./IconButton-94513e9f.js";import{h as me}from"./moment-fbc5633a.js";import{N as he}from"./NotFoundData-6aa846f8.js";import{P as pe}from"./Menu-36fa9964.js";import{D as B,a as W,b as P}from"./DialogContent-e25d94d3.js";import{T as C}from"./Typography-28c2af85.js";import{M as xe,A as ge}from"./AuthenticatedLayout-f217626d.js";import{G as R}from"./Grid-8365dcbf.js";import"./Close-d79a7d3c.js";import"./createSvgIcon-648646f2.js";function ve({resource:o,clickOpenNewEvent:i}){var d;const{events:l,auth:c}=F().props,[f,T]=k.useState(""),[r,u]=k.useState(),a=(s,b)=>{T(b),o&&S.get(o,{search:r,status:b},{preserveState:!0})},m=s=>{u(s.target.value),o&&S.get(o,{search:s.target.value,status:f},{preserveState:!0})};return e.jsxs(p,{display:"flex",alignItems:"center",children:[e.jsx(re,{value:f,children:e.jsx(p,{sx:{borderBottom:1,borderColor:"divider"},children:e.jsx(ae,{onChange:a,"aria-label":"lab API tabs example",children:e.jsx(oe,{label:e.jsxs("div",{children:["Todos",e.jsx(se,{sx:{background:"white",color:"black",ml:1,borderRadius:"5px"},size:"small",label:2})]}),value:""})})})}),e.jsxs(p,{ml:2,flex:1,display:"flex",flexDirection:"row",justifyContent:"end",alignItems:"center",gap:2,children:[i&&e.jsx(j,{variant:"contained",color:"primary",onClick:i,disabled:!((d=c==null?void 0:c.roles)!=null&&d.some(s=>s==="create events")),children:"Criar Evento"}),e.jsx(G,{InputProps:{startAdornment:e.jsx(ue,{position:"start",children:e.jsx(ne,{sx:{color:"#fff"}})})},InputLabelProps:{shrink:!1},color:"secondary",required:!0,id:"search",placeholder:"Buscar",name:"search",value:r,onChange:m}),e.jsx(q,{sx:{width:"207px",backgroundColor:"#2E2E2E",color:"#fff",borderRadius:"10px !important","& .MuiIconButton-root":{color:"primary.main"}}}),e.jsx(j,{variant:"outlined",color:"primary",children:"Encerrar eventos"}),e.jsx(_,{"aria-label":"delete",sx:{mr:2},children:e.jsx(L,{sx:{color:"#ffffff"}})})]})]})}function je(o){return Y({},o)}var X=1440,be=2520,E=43200,De=86400;function Ce(o,i,l){var c,f;z(2,arguments);var T=Q(),r=(c=(f=l==null?void 0:l.locale)!==null&&f!==void 0?f:T.locale)!==null&&c!==void 0?c:$;if(!r.formatDistance)throw new RangeError("locale must contain formatDistance property");var u=V(o,i);if(isNaN(u))throw new RangeError("Invalid time value");var a=Y(je(l),{addSuffix:!!(l!=null&&l.addSuffix),comparison:u}),m,d;u>0?(m=I(i),d=I(o)):(m=I(o),d=I(i));var s=J(d,m),b=(y(d)-y(m))/1e3,n=Math.round((s-b)/60),x;if(n<2)return l!=null&&l.includeSeconds?s<5?r.formatDistance("lessThanXSeconds",5,a):s<10?r.formatDistance("lessThanXSeconds",10,a):s<20?r.formatDistance("lessThanXSeconds",20,a):s<40?r.formatDistance("halfAMinute",0,a):s<60?r.formatDistance("lessThanXMinutes",1,a):r.formatDistance("xMinutes",1,a):n===0?r.formatDistance("lessThanXMinutes",1,a):r.formatDistance("xMinutes",n,a);if(n<45)return r.formatDistance("xMinutes",n,a);if(n<90)return r.formatDistance("aboutXHours",1,a);if(n<X){var N=Math.round(n/60);return r.formatDistance("aboutXHours",N,a)}else{if(n<be)return r.formatDistance("xDays",1,a);if(n<E){var D=Math.round(n/X);return r.formatDistance("xDays",D,a)}else if(n<De)return x=Math.round(n/E),r.formatDistance("aboutXMonths",x,a)}if(x=K(d,m),x<12){var v=Math.round(n/E);return r.formatDistance("xMonths",v,a)}else{var g=x%12,M=Math.floor(x/12);return g<3?r.formatDistance("aboutXYears",M,a):g<9?r.formatDistance("overXYears",M,a):r.formatDistance("almostXYears",M+1,a)}}function Se(o,i){return z(1,arguments),Ce(o,Date.now(),i)}function Te({events:o,resource:i}){const{errors:l,sports:c,auth:f}=F().props,T=[{field:"title",headerName:"Nome",sortable:!1,filterable:!1,flex:1},{field:"sport",headerName:"Esporte",headerAlign:"left",align:"left",sortable:!1,filterable:!1,flex:1},{field:"games.count",headerName:"Jogos",width:120,sortable:!1,filterable:!1,valueGetter:t=>t.row.games.length},{field:"created_at",headerName:"Criado em",headerAlign:"left",align:"right",sortable:!1,filterable:!1,flex:1,valueGetter:t=>t.row.games.length,renderCell:t=>e.jsx(C,{variant:"body1",color:"error",children:Se(new Date(2023,10,11),{locale:ee})})},{field:"",headerName:"Ações",sortable:!1,filterable:!1,renderCell:t=>{var h;return e.jsxs(ie,{direction:"row",children:[e.jsx(_,{"aria-label":"edit",sx:{mr:1},onClick:w=>{w.preventDefault(),s(!0),g(t.row),b()},children:e.jsx(de,{sx:{color:"#ffffff"}})}),((h=f==null?void 0:f.roles)==null?void 0:h.includes("create events"))&&e.jsx(_,{"aria-label":"delete",sx:{mr:1},onClick:()=>{g(t.row),N()},children:e.jsx(L,{sx:{color:"#ffffff"}})})]})},width:200}],[r,u]=k.useState(!1),[a,m]=k.useState(!1),[d,s]=k.useState(!1),b=()=>{u(!0),s(!1)},n=()=>{M(),u(!0),s(!0)},x=()=>{s(!1),u(!1)},N=()=>{m(!0)},D=()=>{m(!1)},{data:v,setData:g,reset:M,post:Me,processing:we}=Z({id:0,title:"",sport:"",sport_id:0,end_date:""}),H=t=>{t.preventDefault();const h=c.find(w=>w.id===v.sport_id).name;g("sport",h),setTimeout(()=>{S.post(route("events.storeFromModal"),{...v,sport:h},{preserveState:!0,onSuccess:w=>{u(!1)},onError:w=>{}})},500)};function U(){S.delete(route("events.destroy",{id:v.id}),{onSuccess:t=>{D()}})}return e.jsxs(e.Fragment,{children:[e.jsxs(pe,{elevation:5,variant:"indicator",children:[e.jsx(ve,{resource:i,clickOpenNewEvent:n}),o.data.length===0?e.jsx(he,{}):e.jsx(le,{disableRowSelectionOnClick:!0,disableColumnMenu:!0,onRowSelectionModelChange:t=>{},onRowClick:(t,h)=>{h.target.nodeName==="DIV"&&S.get("/eventos/"+t.row.id)},disableColumnSelector:!0,rows:o.data,rowCount:o.total,paginationMode:"server",columns:T,density:"comfortable",initialState:{pagination:{paginationModel:{page:o.current_page-1,pageSize:o.per_page}}},onPaginationModelChange:(t,h)=>{S.get("/eventos",{page:t.page+1,per_page:t.pageSize},{preserveState:!0})},pageSizeOptions:[5,10],checkboxSelection:!0})]}),e.jsxs(B,{open:r,onClose:x,PaperProps:{sx:{backgroundColor:"#2e2e2e"}},maxWidth:"md",fullWidth:!0,children:[e.jsx(O,{children:"Criar Evento"}),e.jsx(_,{"aria-label":"close",onClick:x,sx:{position:"absolute",right:8,top:8,color:t=>t.palette.primary.main},children:e.jsx(A,{})}),e.jsx(W,{children:e.jsxs(p,{component:"form",id:"form_edit",onSubmit:H,noValidate:!0,sx:{mt:1,display:"flex",flexDirection:"row"},gap:2,children:[e.jsxs(p,{display:"flex",flexDirection:"column",gap:2,width:"100%",children:[e.jsxs(p,{width:"100%",children:[e.jsx(C,{variant:"subtitle2",color:"white",fontWeight:600,children:"Nome do evento"}),e.jsx(G,{fullWidth:!0,required:!0,disabled:!d,id:"title",name:"title",placeholder:"Campeonato Brasileiro",value:v.title,error:!!l.title,helperText:l.title,onChange:t=>g("title",t.target.value),InputLabelProps:{shrink:!1}})]}),e.jsxs(p,{width:"100%",children:[e.jsx(C,{variant:"caption",color:"white",fontWeight:600,children:"Data final do evento ( o evento se encerrara automaticamente)"}),e.jsx(q,{value:new Date(v.end_date),onChange:t=>g("end_date",me(t).format("YYYY-MM-DD H:mm:ss")),sx:{width:"100%",backgroundColor:"#1B1C1B",color:"#fff",borderRadius:"10px !important","& .MuiIconButton-root":{color:"primary.main"}}})]})]}),e.jsx(p,{display:"flex",flexDirection:"column",gap:2,width:"100%",children:e.jsxs(p,{width:"100%",children:[e.jsx(C,{variant:"caption",color:"white",fontWeight:600,children:"Esporte"}),e.jsx(ce,{fullWidth:!0,children:e.jsx(fe,{sx:{backgroundColor:"#1B1C1B",color:"#fff"},value:v.sport_id,placeholder:"Selecione um esporte",onChange:t=>{g("sport_id",+t.target.value)},children:c&&c.map((t,h)=>e.jsx(xe,{value:t.id,children:t.name},h))})})]})})]})}),e.jsxs(P,{sx:{display:"flex",p:3},children:[!d&&e.jsx(e.Fragment,{children:e.jsx(j,{variant:"outlined",onClick:()=>{s(!0)},children:"Mudar informações"})}),d&&e.jsxs(e.Fragment,{children:[e.jsx(j,{variant:"contained",type:"submit",form:"form_edit",children:"Salvar"}),e.jsx(j,{variant:"outlined",onClick:()=>{s(!1)},children:"Cancelar"})]})]})]}),e.jsxs(B,{open:a,onClose:D,PaperProps:{sx:{backgroundColor:"#2e2e2e"}},maxWidth:"sm",fullWidth:!0,children:[e.jsx(O,{children:"Deletar contas"}),e.jsx(_,{"aria-label":"close",onClick:D,sx:{position:"absolute",right:8,top:8,color:t=>t.palette.primary.main},children:e.jsx(A,{})}),e.jsx(W,{children:e.jsx(C,{variant:"body1",fontWeight:400,children:"Tem certeza que desenha deletar esse evento?"})}),e.jsx(P,{sx:{display:"flex",p:3},children:e.jsxs(e.Fragment,{children:[e.jsx(j,{variant:"contained",color:"error",onClick:U,children:"Deletar"}),e.jsx(j,{variant:"outlined",onClick:D,children:"Cancelar"})]})})]})]})}function Ge({auth:o,events:i}){return e.jsxs(ge,{user:o.user,children:[e.jsx(te,{title:"EVENTOS"}),e.jsxs(p,{children:[e.jsx(C,{variant:"h5",mb:2,children:"EVENTOS"}),e.jsx(R,{container:!0,spacing:2,children:e.jsx(R,{item:!0,xs:12,children:e.jsx(Te,{events:i})})})]})]})}export{Ge as default};
