import{_ as H,r as c,u as ue,a as pe,j as e,q as J,y as T,W as fe,Q as B,b as je}from"./app-94ff2bf7.js";import{T as be,a as ge,b as G,C as M,d as ve,D as Ce,F as y,c as w,S as ye}from"./Search-709e47eb.js";import{d as oe,D as O,a as q,b as le}from"./ModeEditOutline-dc9b42b0.js";import{g as we,a as ke,s as Se,c as Ie,b as Pe,B as a}from"./Box-bfd92c26.js";import{u as Te,f as Ae,T as k,F as De,a as ae}from"./TextField-20cf0c6b.js";import{I as Fe}from"./InputAdornment-a01497de.js";import{B as h}from"./Button-74c67291.js";import{I as j}from"./IconButton-8b786467.js";import{D as z,a as U,b as $}from"./DialogContent-a72381c5.js";import{c as We,L as _e,P as ie}from"./Menu-e18445c6.js";import{L as Le,a as Ne,b as Re,A as Ee}from"./AuthenticatedLayout-4304848d.js";import{c as Ge}from"./helper-545a7ee1.js";import{N as Me}from"./NotFoundData-f621d7d0.js";import{T as o}from"./Typography-f969e485.js";import{G as S}from"./Grid-f2c64255.js";import"./Close-f1c77360.js";import"./createSvgIcon-4d4aaaec.js";import"./moment-fbc5633a.js";function Oe(s){return we("MuiFormGroup",s)}ke("MuiFormGroup",["root","row","error"]);const qe=["className","row"],ze=s=>{const{classes:d,row:n,error:x}=s;return Pe({root:["root",n&&"row",x&&"error"]},Oe,d)},Ue=Se("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(s,d)=>{const{ownerState:n}=s;return[d.root,n.row&&d.row]}})(({ownerState:s})=>H({display:"flex",flexDirection:"column",flexWrap:"wrap"},s.row&&{flexDirection:"row"})),Be=c.forwardRef(function(d,n){const x=ue({props:d,name:"MuiFormGroup"}),{className:p,row:W=!1}=x,b=pe(x,qe),g=Te(),A=Ae({props:x,muiFormControl:g,states:["error"]}),l=H({},x,{row:W,error:A.error}),v=ze(l);return e.jsx(Ue,H({className:Ie(v.root,p),ownerState:l,ref:n},b))}),te=Be,$e=We(e.jsx("path",{d:"M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"ChevronRight");function He({resource:s,aproveHandle:d}){const{admins:n,pendings:x,auth:p}=J().props,[W,b]=c.useState(!1),[g,A]=c.useState(""),[l,v]=c.useState(),I=(m,P)=>{A(P),s&&T.get(s,{search:l,status:P},{preserveState:!0})},D=m=>{v(m.target.value),s&&T.get(s,{search:m.target.value,status:g},{preserveState:!0})};return e.jsxs(e.Fragment,{children:[e.jsxs(a,{display:"flex",alignItems:"center",children:[e.jsx(be,{value:g,children:e.jsx(a,{sx:{borderBottom:1,borderColor:"divider"},children:e.jsxs(ge,{onChange:I,"aria-label":"lab API tabs example",children:[e.jsx(G,{label:e.jsxs("div",{children:["Todos",e.jsx(M,{sx:{background:"white",color:"black",ml:1,borderRadius:"5px"},size:"small",label:n.total_users})]}),value:""}),e.jsx(G,{label:e.jsxs("div",{children:["Ativo",e.jsx(M,{color:"success",size:"small",label:n.total_actives,sx:{ml:1,borderRadius:"5px"}})]}),value:"Ativo"}),e.jsx(G,{label:e.jsxs("div",{children:["Novos",e.jsx(M,{color:"warning",size:"small",label:n.total_recents,sx:{ml:1,borderRadius:"5px"}})]}),value:"Novo"}),e.jsx(G,{label:e.jsxs("div",{children:["Inativos",e.jsx(M,{color:"error",size:"small",label:n.total_inactives,sx:{ml:1,borderRadius:"5px"}})]}),value:"Inativo"})]})})}),e.jsxs(a,{ml:2,flex:1,display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsx(k,{InputProps:{startAdornment:e.jsx(Fe,{position:"start",children:e.jsx(ve,{sx:{color:"#fff"}})})},InputLabelProps:{shrink:!1},color:"secondary",required:!0,id:"search",placeholder:"Buscar",name:"search",value:l,onChange:D}),e.jsxs(h,{disabled:!p.roles.includes("aprove admins"),variant:"contained",color:"primary",onClick:()=>b(!0),children:["Solicitações ",x.length]}),e.jsx(j,{"aria-label":"delete",sx:{mr:2},children:e.jsx(oe,{sx:{color:"#ffffff"}})})]})]}),e.jsxs(z,{open:W,onClose:()=>b(!1),PaperProps:{sx:{backgroundColor:"#2e2e2e"}},maxWidth:"sm",fullWidth:!0,children:[e.jsx(O,{children:"Aguardando aprovação"}),e.jsx(j,{"aria-label":"close",onClick:()=>b(!1),sx:{position:"absolute",right:8,top:8,color:m=>m.palette.primary.main},children:e.jsx(q,{})}),e.jsx(U,{children:e.jsx(_e,{children:x&&x.map(m=>e.jsx(Le,{sx:{margin:2},onClick:()=>d(m),children:e.jsx(Ne,{secondaryAction:e.jsx(j,{edge:"end","aria-label":"delete",children:e.jsx($e,{color:"primary"})}),children:e.jsx(Re,{primary:m.name})})},m.id))})})]})]})}function Je({admins:s,resource:d}){var K,V,X,Y,Z,ee,re,se;const n=[{field:"fullName",headerName:"Nome",sortable:!1,flex:1,valueGetter:r=>`${r.row.name||""} ${r.row.lastName||""}`},{field:"profile.phone",headerName:"Telefone",sortable:!1,type:"number",headerAlign:"left",align:"left",flex:1,valueGetter:r=>r.row.profile.phone},{field:"email",sortable:!1,headerName:"E-mail",flex:1},{field:"status",headerName:"Status",sortable:!1,width:120,renderCell:r=>{switch(Ge(r.row)||""){case"Ativo":return e.jsx(o,{variant:"body1",sx:{color:"success.main"},children:"Ativo"});case"Inativo":return e.jsx(o,{variant:"body1",color:"error",children:"Inativo"});case"Novo":return e.jsx(o,{sx:{color:"warning.main"},children:"Novo"});default:return e.jsx(o,{variant:"body1",children:r.row.profile.account_status})}}},{field:"",headerName:"Ações",sortable:!1,renderCell:r=>e.jsxs(ye,{direction:"row",children:[e.jsx(j,{disabled:!Q.roles.includes("edit admins"),"aria-label":"edit",sx:{mr:1},onClick:()=>ne(r.row),children:e.jsx(le,{sx:{color:"#ffffff"}})}),e.jsx(j,{disabled:!Q.roles.includes("delete admins"),"aria-label":"edit",sx:{mr:1},onClick:()=>de(r.row),children:e.jsx(oe,{sx:{color:"#ffffff"}})})]}),width:160}],[x,p]=c.useState(!1),[W,b]=c.useState(!1),[g,A]=c.useState(!1),[l,v]=c.useState([]),[I,D]=c.useState(null),[m,P]=c.useState(!1),[f,_]=c.useState(!1),{errors:i,auth:Q}=J().props,ne=r=>{u({...r.profile,...r,roles:r.roles.map(F=>F.name)}),D(r),p(!0)},ce=r=>{u({...r.profile,...r}),P(!0),p(!0)},L=()=>{_(!1),P(!1),p(!1)},de=r=>{b(!0),D(r)},E=()=>{D(null),b(!1)},N=()=>{D(null),v([]),A(!1)},C=r=>{if(l==null?void 0:l.some(R=>R===r.target.name)){v(l==null?void 0:l.filter(R=>R!==r.target.name));return}v(R=>[...R,r.target.name])},xe=()=>{I&&T.delete(route("administration.destroy",{user:I}),{onSuccess:r=>{E()}})};c.useEffect(()=>{u("roles",l)},[l]),c.useEffect(()=>{g&&I&&v(()=>I.roles.map(r=>r.name))},[I,g]);const me=()=>{T.post(route("administration.permission.add",{user:t.id}),{roles:t.roles},{onSuccess:r=>{B.success("Permissões adicionada ao usuário com sucesso"),N()},onError:r=>{B.error(r.message),N()}})},{data:t,setData:u,post:Ke,processing:Ve}=fe({id:0,email:"",name:"",birthday:"",cpf:"",phone:"",pix_key:"",roles:[""]}),he=r=>{r.preventDefault(),T.put(route("administration.update",t.id),t,{preserveState:!0,onSuccess:F=>{B.success("Usuário atualizado com sucesso!"),_(!1),p(!1)},onError:F=>{}})};return e.jsxs(e.Fragment,{children:[e.jsxs(ie,{elevation:5,variant:"indicator",sx:{maxWidth:"100%"},children:[e.jsx(He,{resource:d,aproveHandle:ce}),s.data.length===0?e.jsx(Me,{}):e.jsx(Ce,{disableRowSelectionOnClick:!0,disableColumnSelector:!0,rows:s.data,rowCount:s.total,paginationMode:"server",columns:n,density:"comfortable",disableColumnFilter:!0,disableColumnMenu:!0,initialState:{pagination:{paginationModel:{page:s.current_page-1,pageSize:s.per_page}}},onPaginationModelChange:(r,F)=>{T.get("",{page:r.page+1,per_page:r.pageSize},{preserveState:!0})},checkboxSelection:!0})]}),e.jsxs(z,{open:x,onClose:L,PaperProps:{sx:{backgroundColor:"#2e2e2e"}},maxWidth:"md",fullWidth:!0,children:[e.jsx(O,{children:"Gerenciar Conta"}),e.jsx(j,{"aria-label":"close",onClick:L,sx:{position:"absolute",right:8,top:8,color:r=>r.palette.primary.main},children:e.jsx(q,{})}),e.jsx(U,{children:e.jsxs(a,{component:"form",id:"form_edit",onSubmit:he,noValidate:!0,sx:{mt:1,display:"flex",flexDirection:"row"},gap:2,children:[e.jsxs(a,{display:"flex",flexDirection:"column",gap:2,width:"100%",children:[e.jsxs(a,{width:"100%",children:[e.jsx(o,{variant:"subtitle2",color:"white",fontWeight:600,children:"Nome'"}),e.jsx(k,{fullWidth:!0,required:!0,disabled:!f,id:"name",name:"name",placeholder:"example@example.com",value:t.name,error:!!i.name,helperText:i.name,onChange:r=>u("name",r.target.value),InputLabelProps:{shrink:!1}})]}),e.jsxs(a,{width:"100%",children:[e.jsx(o,{variant:"subtitle2",color:"white",fontWeight:600,children:"CPF"}),e.jsx(k,{fullWidth:!0,required:!0,disabled:!f,id:"cpf",name:"cpf",placeholder:"22/04/1986",value:t.cpf,error:!!i.cpf,helperText:i.cpf,onChange:r=>u("cpf",r.target.value),InputLabelProps:{shrink:!1}})]}),e.jsxs(a,{width:"100%",children:[e.jsx(o,{variant:"subtitle2",color:"white",fontWeight:600,children:"Data de nascimento"}),e.jsx(k,{fullWidth:!0,required:!0,disabled:!f,id:"birthday",name:"birthday",placeholder:"1234567890",value:t.birthday,error:!!i.birthday,helperText:i.birthday,onChange:r=>u("birthday",r.target.value),InputLabelProps:{shrink:!1}})]}),e.jsxs(a,{width:"100%",children:[e.jsx(o,{variant:"subtitle2",color:"white",fontWeight:600,children:"Telefone"}),e.jsx(k,{fullWidth:!0,required:!0,disabled:!f,id:"phone",name:"phone",placeholder:"1234567890",value:t.phone,error:!!i.phone,helperText:i.phone,onChange:r=>u("phone",r.target.value),InputLabelProps:{shrink:!1}})]})]}),e.jsxs(a,{display:"flex",flexDirection:"column",gap:2,width:"100%",children:[e.jsxs(a,{width:"100%",children:[e.jsx(o,{variant:"subtitle2",color:"white",fontWeight:600,children:"Email"}),e.jsx(k,{fullWidth:!0,required:!0,disabled:!f,id:"email",name:"email",placeholder:"example@example.com",value:t.email,error:!!i.email,helperText:i.email,onChange:r=>u("email",r.target.value),InputLabelProps:{shrink:!1}})]}),e.jsxs(a,{width:"100%",children:[e.jsx(o,{variant:"subtitle2",color:"white",fontWeight:600,children:"Usuário"}),e.jsx(k,{fullWidth:!0,required:!0,disabled:!f,id:"name",name:"name",placeholder:"example@example.com",value:t.name,error:!!i.name,helperText:i.name,onChange:r=>u("name",r.target.value),InputLabelProps:{shrink:!1}})]}),e.jsxs(a,{width:"100%",children:[e.jsx(o,{variant:"subtitle2",color:"white",fontWeight:600,children:"Chave Pix"}),e.jsx(k,{fullWidth:!0,required:!0,disabled:!f,id:"pix_key",name:"pix_key",placeholder:"example@example.com",value:t.pix_key,error:!!i.pix_key,helperText:i.pix_key,onChange:r=>u("pix_key",r.target.value),InputLabelProps:{shrink:!1}})]})]})]})}),e.jsxs($,{sx:{display:"flex",p:3},children:[!f&&e.jsx(e.Fragment,{children:m?e.jsxs(e.Fragment,{children:[e.jsx(h,{variant:"contained",onClick:()=>{L(),P(!1),T.put(route("administration.aprove",{id:t.id}),{},{preserveState:!0})},children:"Aprovar"}),e.jsx(h,{variant:"outlined",onClick:()=>{L(),_(!1),P(!1)},children:"Recusar"})]}):e.jsxs(e.Fragment,{children:[e.jsx(a,{display:"flex",flexDirection:"row",flex:1,gap:2,children:e.jsx(h,{variant:"outlined",onClick:()=>{A(!0),L()},children:"Permissões"})}),e.jsx(h,{variant:"outlined",onClick:()=>{_(!0)},children:"Mudar informações"})]})}),f&&e.jsxs(e.Fragment,{children:[e.jsx(h,{variant:"contained",type:"submit",form:"form_edit",children:"Salvar"}),e.jsx(h,{variant:"outlined",onClick:()=>{_(!1)},children:"Cancelar"})]})]})]}),e.jsxs(z,{open:W,onClose:E,PaperProps:{sx:{backgroundColor:"#2e2e2e"}},maxWidth:"sm",fullWidth:!0,children:[e.jsx(O,{children:"Deletar contas"}),e.jsx(j,{"aria-label":"close",onClick:E,sx:{position:"absolute",right:8,top:8,color:r=>r.palette.primary.main},children:e.jsx(q,{})}),e.jsx(U,{children:e.jsx(o,{variant:"body1",fontWeight:400,children:"Tem certeza que desenha deletar esse administrador?"})}),e.jsx($,{sx:{display:"flex",p:3},children:e.jsxs(e.Fragment,{children:[e.jsx(h,{variant:"contained",color:"error",onClick:()=>xe(),children:"Deletar"}),e.jsx(h,{variant:"outlined",onClick:E,children:"Cancelar"})]})})]}),e.jsxs(z,{open:g,onClose:N,PaperProps:{sx:{backgroundColor:"#2e2e2e"}},maxWidth:"sm",fullWidth:!0,children:[e.jsx(O,{children:"Adicionar permissões"}),e.jsx(j,{"aria-label":"close",onClick:N,sx:{position:"absolute",right:8,top:8,color:r=>r.palette.primary.main},children:e.jsx(q,{})}),e.jsx(U,{children:e.jsx(a,{sx:{display:"flex"},children:e.jsxs(De,{component:"fieldset",variant:"filled",children:[e.jsx(ae,{component:"legend",children:"Dashboard"}),e.jsxs(te,{children:[e.jsx(y,{control:e.jsx(w,{sx:({palette:r})=>({color:r.primary.main}),color:"primary",checked:(K=t.roles)==null?void 0:K.some(r=>r==="view dashboard"),onChange:C,name:"view dashboard"}),label:"Ter acesso a aba “RECEITAS”"}),e.jsx(y,{control:e.jsx(w,{sx:({palette:r})=>({color:r.primary.main}),color:"primary",checked:(V=t.roles)==null?void 0:V.some(r=>r==="edit users"),onChange:C,name:"edit users"}),label:"Editar perfil de usuário"}),e.jsx(y,{control:e.jsx(w,{sx:({palette:r})=>({color:r.primary.main}),color:"primary",checked:(X=t.roles)==null?void 0:X.some(r=>r==="edit admins"),onChange:C,name:"edit admins"}),label:"Editar perfil de administrador"}),e.jsx(y,{control:e.jsx(w,{sx:({palette:r})=>({color:r.primary.main}),color:"primary",checked:(Y=t.roles)==null?void 0:Y.some(r=>r==="aprove admins"),onChange:C,name:"aprove admins"}),label:"Poder aceitar solicitação de novos administradores"}),e.jsx(y,{control:e.jsx(w,{sx:({palette:r})=>({color:r.primary.main}),color:"primary",checked:(Z=t.roles)==null?void 0:Z.some(r=>r==="delete admins"),onChange:C,name:"delete admins"}),label:"Excluir perfil de administrador"}),e.jsx(y,{control:e.jsx(w,{sx:({palette:r})=>({color:r.primary.main}),color:"primary",checked:(ee=t.roles)==null?void 0:ee.some(r=>r==="delete users"),onChange:C,name:"delete users"}),label:"Excluir perfil de usuario"})]}),e.jsx(ae,{sx:{marginTop:3},component:"legend",children:"Jogo / Aposta"}),e.jsxs(te,{children:[e.jsx(y,{control:e.jsx(w,{sx:({palette:r})=>({color:r.primary.main}),color:"primary",checked:(re=t.roles)==null?void 0:re.some(r=>r==="create events"),onChange:C,name:"create events"}),label:"Criar evento/Excluir evento"}),e.jsx(y,{control:e.jsx(w,{sx:({palette:r})=>({color:r.primary.main}),color:"primary",checked:(se=t.roles)==null?void 0:se.some(r=>r==="view bets"),onChange:C,name:"view bets"}),label:"Ter acesso a aba “Apostas”"})]})]})})}),e.jsx($,{sx:{display:"flex",p:3},children:e.jsxs(e.Fragment,{children:[e.jsx(h,{variant:"contained",color:"primary",onClick:()=>me(),children:"Adicionar"}),e.jsx(h,{variant:"outlined",onClick:N,children:"Cancelar"})]})})]})]})}function pr({auth:s,admins:d,superuser:n}){return e.jsxs(Ee,{user:s.user,children:[e.jsx(je,{title:"Administração"}),e.jsxs(a,{children:[e.jsx(o,{variant:"h5",mb:2,children:"ADMINISTRAÇÃO / DONO"}),e.jsxs(S,{container:!0,spacing:2,children:[e.jsx(S,{item:!0,xs:12,children:e.jsx(Qe,{})}),e.jsx(S,{item:!0,xs:12,children:e.jsx(Je,{admins:d,resource:"/administracao"})})]})]})]})}function Qe(){const{superuser:s}=J().props;return e.jsx(ie,{elevation:5,variant:"indicator",children:e.jsx(a,{p:4,children:e.jsxs(S,{container:!0,columns:14,children:[e.jsx(S,{item:!0,xs:4,children:e.jsx(a,{display:"flex",height:40,alignItems:"center",children:e.jsx(o,{variant:"body1",children:s.name})})}),e.jsx(S,{item:!0,xs:4,children:e.jsx(a,{display:"flex",height:40,alignItems:"center",children:e.jsx(o,{variant:"body1",children:"88 99356-8477"})})}),e.jsx(S,{item:!0,xs:4,children:e.jsx(a,{display:"flex",height:40,alignItems:"center",children:e.jsx(o,{variant:"body1",children:s.email})})}),e.jsx(S,{item:!0,xs:2,children:e.jsxs(a,{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",children:[e.jsx(o,{variant:"body1",sx:{color:"success.main"},children:"Ativo"}),e.jsx(j,{"aria-label":"edit",sx:{mr:1},onClick:()=>{},children:e.jsx(le,{sx:{color:"#ffffff"}})})]})})]})})})}export{pr as default};
