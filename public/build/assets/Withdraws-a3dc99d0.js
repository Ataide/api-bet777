import{q as W,r as h,j as e,y as C,W as A,Q as k,b as D}from"./app-f8b9ab11.js";import{f as p}from"./helper-545a7ee1.js";import{d as L,D as N,a as z,b as B}from"./ModeEditOutline-2eec1176.js";import{T as E,a as F,b as g,C as v,d as q,D as G,S as M}from"./Search-6234e3b5.js";import{B as x}from"./Box-7f40d207.js";import{T as u,F as R,S as O}from"./TextField-f2593e54.js";import{I as $}from"./InputAdornment-e0619d73.js";import{I as _}from"./IconButton-e88a4fd3.js";import{P as Q}from"./Menu-59a589f9.js";import{T as r}from"./ButtonBase-321d2179.js";import{D as U,a as V,b as H}from"./DialogActions-eaa71092.js";import{G as l}from"./Grid-a93bfbb2.js";import{M as w,A as J}from"./AuthenticatedLayout-cef06b8b.js";import{B as T}from"./Button-5a8dee08.js";import"./moment-fbc5633a.js";import"./createSvgIcon-a46bca50.js";import"./Close-24258ab2.js";function K({resource:s}){const{withdraws:o}=W().props,[t,f]=h.useState(""),[j,S]=h.useState(),m=(n,b)=>{f(b),C.get("",{search:j,status:b},{preserveState:!0})},c=n=>{S(n.target.value),C.get("",{search:n.target.value,status:t},{preserveState:!0})};return e.jsxs(x,{display:"flex",alignItems:"center",children:[e.jsx(E,{value:t,children:e.jsx(x,{sx:{borderBottom:1,borderColor:"divider"},children:e.jsxs(F,{onChange:m,"aria-label":"lab API tabs example",children:[e.jsx(g,{label:e.jsxs("div",{children:["Todos",e.jsx(v,{sx:{background:"white",color:"black",ml:1,borderRadius:"5px"},size:"small",label:o.total_withdraws})," "]}),value:""}),e.jsx(g,{label:e.jsxs("div",{children:["Aprovados",e.jsx(v,{color:"success",size:"small",label:o.aproved,sx:{ml:1,borderRadius:"5px"}})]}),value:"aproved"}),e.jsx(g,{label:e.jsxs("div",{children:["Pendentes",e.jsx(v,{color:"warning",size:"small",label:o.pending,sx:{ml:1,borderRadius:"5px"}})]}),value:"pending"}),e.jsx(g,{label:e.jsxs("div",{children:["Cancelados",e.jsx(v,{color:"error",size:"small",label:o.canceled,sx:{ml:1,borderRadius:"5px"}})]}),value:"canceled"})]})})}),e.jsxs(x,{ml:2,flex:1,display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsx(u,{InputProps:{startAdornment:e.jsx($,{position:"start",children:e.jsx(q,{sx:{color:"#fff"}})})},InputLabelProps:{shrink:!1},color:"secondary",required:!0,id:"search",placeholder:"Buscar",name:"search",value:j,onChange:c}),e.jsx(_,{"aria-label":"delete",sx:{mr:2},children:e.jsx(L,{sx:{color:"#ffffff"}})})]})]})}function X({withdraws:s,resource:o}){const{errors:t,auth:f}=W().props,j=[{field:"id",headerName:"#",sortable:!1,width:120},{field:"user.name",headerName:"Usuário",sortable:!1,type:"number",headerAlign:"left",align:"left",flex:1,valueGetter:a=>a.row.user.name},{field:"user.email",headerName:"Email",sortable:!1,flex:1,valueGetter:a=>a.row.user.email},{field:"user.profile.pix_key",headerName:"Chave Pix",sortable:!1,flex:1,valueGetter:a=>a.row.user.profile.pix_key},{field:"transaction.withdraw",headerName:"Valor",sortable:!1,flex:1,valueGetter:a=>p.format(a.row.transaction.withdraw)},{field:"status",headerName:"Status",sortable:!1,width:120,renderCell:a=>{switch(a.row.status){case"aproved":return e.jsx(r,{variant:"body1",sx:{color:"success.main"},children:"Aprovado"});case"canceled":return e.jsx(r,{variant:"body1",color:"error",children:"Cancelado"});case"pending":return e.jsx(r,{sx:{color:"warning.main"},children:"Pendente"});default:return e.jsx(r,{variant:"body1",children:"Não encontrado"})}}},{field:"",headerName:"Ações",align:"center",headerAlign:"center",sortable:!1,renderCell:a=>e.jsx(M,{direction:"row",children:e.jsx(_,{"aria-label":"edit",sx:{mr:1},onClick:()=>b(a.row),children:e.jsx(B,{sx:{color:"#ffffff"}})})}),width:160}],[S,m]=h.useState(!1);h.useState(null);const[c,n]=h.useState(!1),b=a=>{d({email:a.user.email,id:a.id,name:a.user.name,amount:p.format(a.transaction.withdraw),status:a.status,reason:a.reason,pix_key:a.user.profile.pix_key,draw_total:p.format(a.user.wallet.draw_total)}),m(!0)},P=()=>{n(!1),m(!1)},{data:i,setData:d,post:Y,processing:Z}=A({id:0,name:"",status:"",amount:"",reason:"",email:"",pix_key:"",draw_total:""}),I=a=>{if(a.preventDefault(),!f.roles.includes("edit users")){k.error("Desculpa, você não tem autorização para realizar essa ação.");return}C.put(route("withdraws.update",{id:i.id}),i,{preserveState:!0,onSuccess:y=>{k.success("Transação aprovada com sucesso."),n(!1),m(!1)},onError:y=>{k.error(y.message)}})};return e.jsxs(e.Fragment,{children:[e.jsxs(Q,{elevation:5,variant:"indicator",sx:{maxWidth:"100%"},children:[e.jsx(K,{resource:o}),(s==null?void 0:s.data.length)===0?e.jsx(x,{padding:10,children:e.jsx(r,{variant:"body1",color:"gray",textAlign:"center",children:"Não há dados"})}):s&&e.jsx(G,{disableRowSelectionOnClick:!0,disableColumnSelector:!0,rows:s.data,rowCount:s.total,paginationMode:"server",columns:j,density:"comfortable",disableColumnFilter:!0,disableColumnMenu:!0,initialState:{pagination:{paginationModel:{page:s.current_page-1,pageSize:s.per_page}}},onPaginationModelChange:(a,y)=>{C.get("",{page:a.page+1,per_page:a.pageSize},{preserveState:!0})},checkboxSelection:!0})]}),e.jsxs(U,{open:S,onClose:P,PaperProps:{sx:{backgroundColor:"#2e2e2e"}},maxWidth:"md",fullWidth:!0,children:[e.jsx(N,{children:"Finalização de aprovalçao de saque."}),e.jsx(_,{"aria-label":"close",onClick:P,sx:{position:"absolute",right:8,top:8,color:a=>a.palette.primary.main},children:e.jsx(z,{})}),e.jsx(V,{children:e.jsx(x,{component:"form",id:"form_edit",onSubmit:I,noValidate:!0,sx:{mt:1,display:"flex",flexDirection:"row"},gap:2,children:e.jsxs(l,{container:!0,spacing:2,children:[e.jsxs(l,{item:!0,xs:3,children:[e.jsx(r,{variant:"subtitle2",color:"white",fontWeight:600,children:"Nome"}),e.jsx(u,{fullWidth:!0,required:!0,disabled:!0,id:"name",name:"name",placeholder:"example@example.com",value:i.name,error:!!t.name,helperText:t.name,onChange:a=>d("name",a.target.value),InputLabelProps:{shrink:!1}})]}),e.jsxs(l,{item:!0,xs:5,children:[e.jsx(r,{variant:"subtitle2",color:"white",fontWeight:600,children:"Email"}),e.jsx(u,{fullWidth:!0,required:!0,disabled:!0,id:"email",name:"email",value:i.email,error:!!t.email,helperText:t.email,InputLabelProps:{shrink:!1}})]}),e.jsxs(l,{item:!0,xs:4,children:[e.jsx(r,{variant:"caption",color:"white",fontWeight:600,children:"Status"}),e.jsx(R,{fullWidth:!0,children:e.jsxs(O,{disabled:!c,sx:{backgroundColor:"#1B1C1B",color:"#fff"},value:i.status,placeholder:"Selecione um esporte",onChange:a=>{d("status",a.target.value)},children:[e.jsx(w,{value:"pending",children:e.jsx(r,{sx:{color:"warning.main"},children:"Pendente"})}),e.jsx(w,{value:"aproved",children:e.jsx(r,{variant:"body1",color:"primary",children:"Aprovado"})}),e.jsx(w,{value:"canceled",children:e.jsx(r,{variant:"body1",color:"error",children:"Cancelar"})})]})})]}),e.jsxs(l,{item:!0,xs:5,children:[e.jsx(r,{variant:"subtitle2",color:"white",fontWeight:600,children:"Chave Pix"}),e.jsx(u,{fullWidth:!0,disabled:!0,id:"pix_key",name:"pix_key",placeholder:"example@example.com",value:i.pix_key,error:!!t.pix_key,helperText:t.pix_key,onChange:a=>d("pix_key",a.target.value),InputLabelProps:{shrink:!1}})]}),e.jsxs(l,{item:!0,xs:3,children:[e.jsx(r,{variant:"subtitle2",color:"white",fontWeight:600,children:"Saldo disponível."}),e.jsx(u,{fullWidth:!0,disabled:!0,id:"draw_total",name:"draw_total",placeholder:"example@example.com",value:i.draw_total,error:!!t.draw_total,helperText:t.draw_total,onChange:a=>d("draw_total",p.format(+a.target.value)),InputLabelProps:{shrink:!1}})]}),e.jsxs(l,{item:!0,xs:4,children:[e.jsx(r,{variant:"subtitle2",color:"white",fontWeight:600,children:"Saque solicitado."}),e.jsx(u,{fullWidth:!0,disabled:!0,id:"amount",name:"amount",placeholder:"example@example.com",value:i.amount,error:!!t.amount,helperText:t.amount,onChange:a=>d("amount",p.format(+a.target.value)),InputLabelProps:{shrink:!1}})]}),e.jsxs(l,{item:!0,xs:12,children:[e.jsx(r,{variant:"subtitle2",color:"white",fontWeight:600,children:"Observação"}),e.jsx(u,{fullWidth:!0,disabled:!c,id:"reason",name:"reason",placeholder:"1234567890",value:i.reason,error:!!t.reason,helperText:t.reason,onChange:a=>d("reason",a.target.value),InputLabelProps:{shrink:!1}})]})]})})}),e.jsxs(H,{sx:{display:"flex",p:3},children:[!c&&e.jsx(e.Fragment,{children:e.jsx(T,{variant:"outlined",disabled:!f.roles.includes("edit users"),onClick:()=>{n(!0)},children:"Mudar informações"})}),c&&e.jsxs(e.Fragment,{children:[e.jsx(T,{variant:"contained",type:"submit",form:"form_edit",children:"Salvar"}),e.jsx(T,{variant:"outlined",onClick:()=>{n(!1)},children:"Cancelar"})]})]})]})]})}function je({auth:s,withdraws:o}){return e.jsxs(J,{user:s.user,children:[e.jsx(D,{title:"Solicitação de saques"}),e.jsxs(x,{children:[e.jsx(r,{variant:"h5",mb:2,children:"SOLICITAÇÕES DE SAQUES"}),e.jsx(l,{container:!0,spacing:2,children:e.jsx(l,{item:!0,xs:12,children:e.jsx(X,{withdraws:o})})})]})]})}export{je as default};
