import{q as y,r as m,j as e,y as h,b as _}from"./app-afe865fe.js";import{A}from"./AuthenticatedLayout-f217626d.js";import{T as v,a as C,b,C as g,d as T,D as S}from"./Search-e698c6e3.js";import{B as i}from"./Box-0a9b8054.js";import{T as P}from"./TextField-b93b8230.js";import{I as M}from"./InputAdornment-ee2c4a24.js";import{f as k,g as I}from"./helper-545a7ee1.js";import{P as f}from"./Menu-36fa9964.js";import{G as u}from"./Grid-8365dcbf.js";import{h as j}from"./moment-fbc5633a.js";import{T as a}from"./Typography-28c2af85.js";import{B as R}from"./Button-9f098e69.js";import{D as F,C as N,A as Y,p as z,a as B}from"./index-4e47d31c.js";import"./createSvgIcon-648646f2.js";import"./IconButton-94513e9f.js";import"./Close-d79a7d3c.js";function G({resource:r}){const{bets:n}=y().props,[d,t]=m.useState(""),[c,s]=m.useState(),x=(o,p)=>{t(p),r&&h.get(r,{search:c,status:p},{preserveState:!0})},l=o=>{s(o.target.value),h.get("",{search:o.target.value},{preserveState:!0})};return e.jsxs(i,{display:"flex",alignItems:"center",children:[e.jsx(v,{value:d,children:e.jsx(i,{sx:{borderBottom:1,borderColor:"divider"},children:e.jsx(C,{onChange:x,"aria-label":"lab API tabs example",children:e.jsx(b,{label:e.jsxs("div",{children:["Todos",e.jsx(g,{sx:{background:"white",color:"black",ml:1,borderRadius:"5px"},size:"small",label:(n==null?void 0:n.total)||0})]}),value:""})})})}),e.jsx(i,{mr:4,flex:1,display:"flex",flexDirection:"row",justifyContent:"end",alignItems:"center",children:e.jsx(P,{InputProps:{startAdornment:e.jsx(M,{position:"start",children:e.jsx(T,{sx:{color:"#fff"}})})},InputLabelProps:{shrink:!1},color:"secondary",required:!0,id:"search",placeholder:"Buscar",name:"search",value:c,onChange:l})})]})}function E({bets:r,resource:n}){const d=[{field:"user_id",headerName:"ID",sortable:!1,flex:1},{field:"name",headerName:"Nome",sortable:!1,flex:1},{field:"total_bets",headerName:"Apostas",type:"number",headerAlign:"left",align:"left",flex:1,valueGetter:s=>s.row.total_bets},{field:"amount",headerName:"Saldo",type:"number",headerAlign:"left",align:"left",flex:1,valueGetter:s=>k.format(s.row.amount)}],[t,c]=m.useState([]);return e.jsxs(e.Fragment,{children:[e.jsxs(f,{elevation:5,variant:"indicator",children:[e.jsx(G,{}),e.jsx(S,{getRowId:s=>s.user_id,disableRowSelectionOnClick:!0,disableColumnSelector:!0,rows:r.data,rowCount:r.total,paginationMode:"server",columns:d,density:"comfortable",initialState:{pagination:{paginationModel:{page:r.current_page-1,pageSize:r.per_page}}},onPaginationModelChange:(s,x)=>{h.get("/apostas",{page:s.page+1,per_page:s.pageSize},{only:["bets"],preserveState:!0})},checkboxSelection:!0,rowSelectionModel:t,onRowSelectionModelChange:s=>{if(s.length>1){const x=new Set(t),l=s.filter(o=>!x.has(o));h.visit(route("bets",{id:l[0]}),{method:"get",only:["userPapers"],preserveState:!0}),c(l)}else h.visit(route("bets",{id:s[0]}),{method:"get",only:["userPapers"],preserveState:!0}),c(s)}})]}),e.jsx(u,{item:!0,xs:12,children:e.jsx(f,{sx:({palette:s})=>({backgroundColor:s.background.default})})})]})}var w=(r=>(r[r.Vitoria=1]="Vitoria",r[r.Aberto=0]="Aberto",r[r.Derrota=-1]="Derrota",r))(w||{});function O({paper:r}){const[n,d]=m.useState(!1);return e.jsx(f,{sx:{width:"100%"},children:e.jsxs(i,{p:2,children:[e.jsxs(i,{display:"flex",justifyContent:"space-between",mb:.5,children:[e.jsxs(i,{display:"flex",children:[e.jsx(a,{variant:"body2",color:"initial",children:"Aposta:"}),e.jsx(a,{variant:"body2",color:"primary",ml:1,children:r.quantity>1?"Múltipla":"Única"}),e.jsx(a,{variant:"body2",color:"initial",ml:2,children:"Odd:"}),e.jsx(a,{variant:"body2",color:"primary",ml:1,children:r.rate})]}),e.jsx(i,{display:"flex",children:e.jsx(R,{variant:"text",color:"primary",onClick:()=>d(!n),children:"detalhes"})})]}),e.jsxs(i,{display:"flex",justifyContent:"space-between",mb:.5,children:[e.jsxs(i,{display:"flex",children:[e.jsx(a,{variant:"body2",color:"initial",children:"Palpite:"}),e.jsx(a,{variant:"body2",color:"primary",ml:1,children:I(r.bets)})]}),e.jsxs(i,{display:"flex",children:[e.jsx(a,{variant:"body2",color:"initial",children:"Valor:"}),e.jsxs(a,{variant:"body2",color:"primary",ml:1,children:["R$ ",r.amount]}),e.jsx(a,{variant:"body2",color:"initial",ml:1,children:"Lucro possível:"}),e.jsxs(a,{variant:"body2",color:"primary",ml:1,children:["R$ ",r.profit]})]})]}),e.jsxs(i,{display:"flex",justifyContent:"space-between",mb:.5,children:[e.jsxs(i,{display:"flex",children:[e.jsx(a,{variant:"body2",color:"initial",children:"Jogos:"}),e.jsx(a,{variant:"body2",color:"primary",ml:1,children:r.bets.length})]}),e.jsxs(i,{display:"flex",children:[e.jsx(a,{variant:"body2",color:"initial",children:"Data da aposta:"}),e.jsx(a,{variant:"body2",color:"primary",ml:1,children:j(r.created_at).format("DD/MM/YYYY")}),e.jsx(a,{variant:"body2",color:"initial",ml:1,children:"Hora:"}),e.jsx(a,{variant:"body2",color:"primary",ml:1,children:j(r.created_at).format("hh:mm")})]})]}),e.jsxs(i,{display:"flex",justifyContent:"end",children:[e.jsx(a,{variant:"body2",color:"initial",ml:1,children:"Resultado:"}),e.jsx(a,{variant:"body2",sx:({palette:t})=>({color:r.result===0?t.warning.main:r.result===1?t.primary.main:t.error.main}),ml:1,children:w[r.result||0]})]}),(r==null?void 0:r.bets)&&r.bets.map((t,c)=>{var s,x,l,o,p;return e.jsx("div",{children:n&&e.jsxs(f,{elevation:3,sx:D=>({mb:1,p:2,backgroundColor:D.palette.background.default}),children:[e.jsxs(i,{display:"flex",flexDirection:"row",mb:.5,children:[e.jsx(a,{variant:"subtitle2",color:"initial",children:"Odd:"}),e.jsx(a,{variant:"subtitle2",color:"primary",ml:1,children:t.rate})]}),e.jsxs(i,{display:"flex",flexDirection:"row",mb:.5,children:[e.jsx(a,{variant:"subtitle2",color:"initial",children:"Palpite:"}),e.jsx(a,{variant:"subtitle2",color:"primary",ml:1,children:t.bet_choice===1?(s=t.game)==null?void 0:s.home_name:t.bet_choice===-1?(x=t.game)==null?void 0:x.away_name:"Empate"})]}),e.jsx(i,{display:"flex",flexDirection:"row",justifyContent:"space-between",mb:.5,children:e.jsxs(i,{display:"flex",children:[e.jsx(a,{variant:"subtitle2",color:"initial",children:"Jogo:"}),e.jsx(a,{variant:"subtitle2",color:"primary",ml:1,children:((l=t.game)==null?void 0:l.home_name)+" vs "+((o=t.game)==null?void 0:o.away_name)})]})}),e.jsxs(i,{display:"flex",flexDirection:"row",justifyContent:"space-between",children:[e.jsxs(i,{display:"flex",children:[e.jsx(a,{variant:"subtitle2",color:"initial",children:"Data do Jogo:"}),e.jsx(a,{variant:"subtitle2",color:"primary",ml:1,children:j((p=t.game)==null?void 0:p.time_close_bet).format("DD/MM/YYYY hh:mm")})]}),e.jsxs(i,{display:"flex",children:[e.jsx(a,{variant:"subtitle2",color:"initial",children:"Resultado do jogo:"}),t.game&&t.game.done?e.jsx(e.Fragment,{children:t.bet_choice===t.game.result?e.jsx(a,{variant:"subtitle2",color:"primary",ml:1,children:"Vitória"}):e.jsx(a,{variant:"subtitle2",color:"error",ml:1,children:"Derrota"})}):e.jsx(a,{variant:"subtitle2",color:"warning",ml:1,children:"Aberto"})]})]})]})},c)})]})})}const H=[{field:"",headerName:"",sortable:!1,headerClassName:"super-hidden",flex:1,renderCell:r=>e.jsx(O,{paper:r.row})}];function L(){const{userPapers:r,data_donut:n}=y().props,[d,t]=m.useState("-1"),[c,s]=m.useState(),x=(l,o)=>{t(o),h.get("",{search:c,type:o},{preserveState:!0,only:["userPapers"],preserveScroll:!0})};return m.useEffect(()=>{t("-1")},[]),e.jsxs(f,{elevation:5,variant:"indicator",children:[e.jsx(i,{display:"flex",alignItems:"center",children:e.jsx(v,{value:d,children:e.jsx(i,{sx:{borderBottom:1,borderColor:"divider"},children:e.jsxs(C,{onChange:x,"aria-label":"lab API tabs example",children:[e.jsx(b,{label:e.jsxs("div",{children:["Apostas Abertas",e.jsx(g,{color:"primary",sx:{ml:1,borderRadius:"5px"},size:"small",label:r.data.filter(l=>l.status===-1).reduce((l,{deposit:o})=>l+1,0)})]}),value:"-1"}),e.jsx(b,{label:e.jsxs("div",{children:["Apostas Encerradas",e.jsx(g,{sx:{ml:1,borderRadius:"5px"},color:"error",size:"small",label:r.data.filter(l=>l.status===1).reduce((l,{deposit:o})=>l+1,0)})]}),value:"1"})]})})})}),r&&r.data.length===0?e.jsx(i,{padding:10,children:e.jsx(a,{variant:"body1",color:"gray",textAlign:"center",children:"Não há dados"})}):e.jsx(S,{disableRowSelectionOnClick:!0,disableColumnSelector:!0,rows:r.data,rowCount:r.total,paginationMode:"server",columns:H,density:"comfortable",getRowHeight:()=>"auto",initialState:{pagination:{paginationModel:{page:r.current_page-1,pageSize:r.per_page}}},onPaginationModelChange:(l,o)=>{h.get("/transacoes",{page:l.page+1,per_page:l.pageSize},{preserveState:!0,only:["userPapers"]})},sx:{"& .MuiDataGrid-columnHeaders":{display:"none"},"& .MuiDataGrid-row:hover":{backgroundColor:"inherit"}},checkboxSelection:!1})]})}N.register(Y,z,B);function q(){const{data_donut:r}=y().props,n=["Futebol","Volei","Basquete","Baisebol","Boxe","Fut. Americano","Tênis","Outros"],d={responsive:!0,cutout:100,plugins:{legend:{position:"bottom"},title:{display:!0,text:"Chart.js Doughnut Chart"}}},t={labels:n,datasets:[{label:" Quantidade",data:r,borderRadius:3,backgroundColor:["#23af00","#29cf00","#30ef00","#3fff10","#59ff30","#59ff30","#a6ff8f","#bfffaf"],borderColor:["#23af00","#29cf00","#30ef00","#3fff10","#59ff30","#59ff30","#a6ff8f","#bfffaf"],borderWidth:2}]};return e.jsx(e.Fragment,{children:e.jsx(f,{sx:{maxHeight:"759px"},children:e.jsxs(i,{sx:{maxHeight:"359px"},padding:4,display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",children:[e.jsx(a,{variant:"body1",color:"initial",textAlign:"center",my:2,children:"Apostas por esportes"}),e.jsx(F,{options:d,data:t})]})})})}function oe({auth:r,bets:n,userPapers:d}){return e.jsxs(A,{user:r.user,children:[e.jsx(_,{title:"Apostas"}),e.jsxs(i,{children:[e.jsx(a,{variant:"h5",mb:2,children:"APOSTAS"}),e.jsxs(u,{container:!0,spacing:2,children:[e.jsx(u,{item:!0,xs:8,children:e.jsx(E,{bets:n})}),e.jsx(u,{item:!0,xs:4,children:e.jsx(q,{})}),e.jsx(u,{item:!0,xs:5}),d.data&&e.jsx(e.Fragment,{children:e.jsx(u,{item:!0,xs:12,children:e.jsx(L,{})})})]})]})]})}export{oe as default};
